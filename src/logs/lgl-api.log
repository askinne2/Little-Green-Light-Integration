[2025-11-17 11:34:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:34:51] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:35:02] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:02] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:35:02] [debug] LGL Relations Manager: User to order relation created 1958_90163
[2025-11-17 11:35:04] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-17 11:35:04] [debug] LGL Email Blocker: Evaluation - To: Linley@upstateinternational.org | Subject: [Upstate International] New customer order (90163) - November 17, 2025 | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-17 11:35:04] [debug] LGL Email Blocker: BLOCKED email - To: Linley@upstateinternational.org | Subject: [Upstate International] New customer order (90163) - November 17, 2025 | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-17 11:35:04] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-17 11:35:04] [debug] OrderEmailCustomizer: Rendered email template Array
(
    [template] => membership-confirmation.html
    [order_id] => 90163
    [product_id] => 89880
)

[2025-11-17 11:35:04] [debug] LGL Email Blocker: Evaluation - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order has been received! | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-17 11:35:04] [debug] LGL Email Blocker: BLOCKED email - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order has been received! | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-17 11:35:05] [debug] ðŸš€ OrderProcessor::processCompletedOrder() STARTED Array
(
    [order_id] => 90163
    [timestamp] => 2025-11-17 11:35:05
    [memory_usage] => 122MB
    [hook] => woocommerce_payment_complete
)

[2025-11-17 11:35:05] [debug] ðŸ“‹ OrderProcessor: Order Details Array
(
    [order_id] => 90163
    [order_status] => processing
    [order_total] => 77.63
    [customer_id] => 1958
    [customer_email] => andrew@hispanicalliancesc.com
    [payment_method] => stripe_cc
    [order_date] => 2025-11-17 11:35:02
    [item_count] => 1
)

[2025-11-17 11:35:05] [debug] ðŸ‘¤ OrderProcessor: Customer Info Array
(
    [user_id] => 1958
    [billing_email] => andrew@hispanicalliancesc.com
    [billing_first_name] => Andrew
    [billing_last_name] => Skinner
    [billing_phone] => 8653120285
)

[2025-11-17 11:35:05] [debug] âš¡ OrderProcessor: Processing immediate tasks...
[2025-11-17 11:35:05] [debug] âš¡ OrderProcessor::processImmediateTasks() STARTED Array
(
    [order_id] => 90163
    [user_id] => 1958
)

[2025-11-17 11:35:05] [debug] OrderProcessor: Payment method updated Array
(
    [user_id] => 1958
    [payment_method] => stripe_cc
    [stored_as] => online
)

[2025-11-17 11:35:05] [debug] âš¡ OrderProcessor::processOrderProductsImmediate() STARTED Array
(
    [total_products] => 1
    [user_id] => 1958
    [order_id] => 90163
    [mode] => immediate_only
)

[2025-11-17 11:35:05] [debug] ðŸ” OrderProcessor: Processing Product #1 (IMMEDIATE) Array
(
    [name] => Member
    [quantity] => 1
    [product_id] => 89880
    [parent_id] => 89880
    [categories] => Array
        (
            [0] => memberships
        )

)

[2025-11-17 11:35:05] [debug] ðŸŽ¯ OrderProcessor: Processing membership (IMMEDIATE) Array
(
    [product_name] => Member
)

[2025-11-17 11:35:05] [debug] ðŸŽ¯ OrderProcessor::processMembershipProductImmediate() STARTED Array
(
    [user_id] => 1958
    [order_id] => 90163
    [product_name] => Member
    [mode] => immediate_only
)

[2025-11-17 11:35:05] [debug] âš¡ MembershipOrderHandler::processOrderImmediate() STARTED Array
(
    [user_id] => 1958
    [order_id] => 90163
    [membership_level] => Member
    [mode] => immediate_only
)

[2025-11-17 11:35:05] [debug] ðŸ” MembershipOrderHandler: Determining membership level Array
(
    [wc_product_name] => Member
    [product_price] => 75
)

[2025-11-17 11:35:05] [debug] ðŸ” Found LGL sync ID on variation Array
(
    [variation_id] => 89880
    [fund_id] => 412
    [source] => unified
)

[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() called
[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings: settingsHandler is SET
[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() called, raw result: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

)

[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() returning: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

)

[2025-11-17 11:35:05] [debug] âœ… MembershipOrderHandler: Using JetEngine membership mapping Array
(
    [membership_level_id] => 412
    [membership_name] => Individual
)

[2025-11-17 11:35:05] [debug] ðŸ‘¤ Helper: Changing user role Array
(
    [user_id] => 1958
    [old_role] => customer
    [new_role] => ui_member
)

[2025-11-17 11:35:05] [debug] âœ… Helper: User role changed successfully Array
(
    [user_id] => 1958
    [from] => customer
    [to] => ui_member
    [current_roles] => Array
        (
            [0] => ui_patron_owner
            [1] => ui_member
        )

)

[2025-11-17 11:35:05] [debug] MembershipOrderHandler: Updated user role to ui_member (individual) 1958
[2025-11-17 11:35:05] [debug] ðŸ”„ Helper: Converting WC name to LGL name Array
(
    [input] => Individual
)

[2025-11-17 11:35:05] [debug] âš ï¸ Helper: No name mapping found, returning original Array
(
    [wc_name] => Individual
)

[2025-11-17 11:35:05] [debug] UPDATING USER META FOR:  1958
[2025-11-17 11:35:05] [debug] MembershipOrderHandler: User data updated (WordPress only, LGL sync happens separately) 1958
[2025-11-17 11:35:05] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-17 11:35:05] [debug] OrderEmailCustomizer: Rendered email template Array
(
    [template] => membership-confirmation.html
    [order_id] => 90163
    [product_id] => 89880
)

[2025-11-17 11:35:05] [debug] LGL Email Blocker: Evaluation - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order is now complete | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-17 11:35:05] [debug] LGL Email Blocker: BLOCKED email - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order is now complete | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-17 11:35:05] [debug] Set one-time renewal date for user 1958 Array
(
    [membership_level] => Individual
    [renewal_date] => 2026-11-17
    [start_date] => 2025-11-17
)

[2025-11-17 11:35:05] [debug] âœ… MembershipOrderHandler::processOrderImmediate() COMPLETED Array
(
    [order_id] => 90163
    [user_id] => 1958
    [final_membership_level] => Individual
)

[2025-11-17 11:35:05] [debug] âœ… OrderProcessor: MembershipOrderHandler (immediate) completed
[2025-11-17 11:35:05] [debug] âœ… OrderProcessor::processOrderProductsImmediate() COMPLETED Array
(
    [products_processed] => 1
    [events_processed] => 0
    [attendees_created] => 0
)

[2025-11-17 11:35:05] [debug] âœ… OrderProcessor::processImmediateTasks() COMPLETED Array
(
    [order_id] => 90163
)

[2025-11-17 11:35:05] [debug] â° OrderProcessor: Scheduling async LGL sync...
[2025-11-17 11:35:05] [debug] â° AsyncOrderProcessor: Scheduling async processing (WP Cron) Array
(
    [order_id] => 90163
)

[2025-11-17 11:35:05] [debug] âœ… AsyncOrderProcessor: WP Cron event scheduled Array
(
    [order_id] => 90163
    [hook] => lgl_process_order_async
    [scheduled_for] => 2025-11-17 16:35:05
)

[2025-11-17 11:35:05] [debug] ðŸš€ AsyncOrderProcessor: Triggered cron spawn for immediate execution Array
(
    [order_id] => 90163
)

[2025-11-17 11:35:05] [debug] âœ… OrderProcessor::processCompletedOrder() COMPLETED Array
(
    [order_id] => 90163
    [final_memory_usage] => 122MB
    [async_scheduled] => 1
)

[2025-11-17 11:35:05] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:05] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:05] [debug] ðŸ”„ AsyncOrderProcessor: Processing order async (WP Cron) Array
(
    [order_id] => 90163
    [timestamp] => 2025-11-17 11:35:05
    [cron_hook] => lgl_process_order_async
)

[2025-11-17 11:35:05] [debug] ðŸ”„ OrderProcessor::processLglSyncOnly() STARTED Array
(
    [order_id] => 90163
    [timestamp] => 2025-11-17 11:35:05
)

[2025-11-17 11:35:05] [debug] ðŸ”„ OrderProcessor::processOrderProductsLglSync() STARTED Array
(
    [total_products] => 1
    [user_id] => 1958
    [order_id] => 90163
    [mode] => lgl_sync_only
)

[2025-11-17 11:35:05] [debug] ðŸŽ¯ OrderProcessor: Processing membership (LGL SYNC) Array
(
    [product_name] => Member
)

[2025-11-17 11:35:05] [debug] ðŸŽ¯ OrderProcessor::processMembershipProductLglSync() STARTED Array
(
    [user_id] => 1958
    [order_id] => 90163
    [product_name] => Member
    [mode] => lgl_sync_only
)

[2025-11-17 11:35:05] [debug] ðŸ”„ MembershipOrderHandler::processOrderLglSync() STARTED Array
(
    [user_id] => 1958
    [order_id] => 90163
    [membership_level] => Member
    [mode] => lgl_sync_only
)

[2025-11-17 11:35:05] [debug] ðŸ” MembershipOrderHandler: Determining membership level Array
(
    [wc_product_name] => Member
    [product_price] => 75
)

[2025-11-17 11:35:05] [debug] ðŸ” Found LGL sync ID on variation Array
(
    [variation_id] => 89880
    [fund_id] => 412
    [source] => unified
)

[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() called
[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings: settingsHandler is SET
[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() called, raw result: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

)

[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() returning: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

)

[2025-11-17 11:35:05] [debug] âœ… MembershipOrderHandler: Using JetEngine membership mapping Array
(
    [membership_level_id] => 412
    [membership_name] => Individual
)

[2025-11-17 11:35:05] [debug] ðŸ”„ Helper: Converting WC name to LGL name Array
(
    [input] => Individual
)

[2025-11-17 11:35:05] [debug] âš ï¸ Helper: No name mapping found, returning original Array
(
    [wc_name] => Individual
)

[2025-11-17 11:35:05] [debug] ðŸ”— MembershipOrderHandler::registerUserInLGL() STARTED Array
(
    [user_id] => 1958
    [user_email] => andrew@hispanicalliancesc.com
    [membership_type] => Individual
    [order_id] => 90163
    [membership_level_id] => 412
)

[2025-11-17 11:35:05] [debug] ðŸ§­ MembershipRegistrationService::register() STARTED Array
(
    [user_id] => 1958
    [search_name] => Andrew%20Skinner
    [email] => andrew@hispanicalliancesc.com
    [order_id] => 90163
    [membership_level] => Individual
    [membership_level_id] => 412
)

[2025-11-17 11:35:05] [debug] ðŸ” MembershipRegistrationService: Found LGL ID in user meta Array
(
    [user_id] => 1958
    [lgl_id] => 947132
    [meta_key] => lgl_constituent_id or lgl_id
)

[2025-11-17 11:35:05] [debug] LGL Connection: Cache HIT for constituents/947132
[2025-11-17 11:35:05] [debug] âœ… MembershipRegistrationService: LGL ID verified in LGL Array
(
    [lgl_id] => 947132
    [constituent_name] => Andrew Skinner
)

[2025-11-17 11:35:05] [debug] ðŸ”„ MembershipRegistrationService: Existing constituent found, updating Array
(
    [user_id] => 1958
    [lgl_id] => 947132
    [match_method] => user_meta
)

[2025-11-17 11:35:05] [debug] LGL Constituents: Name set Array
(
    [first_name] => Andrew
    [last_name] => Skinner
)

[2025-11-17 11:35:05] [debug] LGL Constituents: Email set andrew@hispanicalliancesc.com
[2025-11-17 11:35:05] [debug] LGL Constituents: Phone set 8642560760
[2025-11-17 11:35:05] [debug] LGL Constituents: ðŸ” setAddress: Checking user meta Array
(
    [user_id] => 1958
    [street1] => 57 Blake Street
    [city] => Greenville
    [has_street1] => 1
    [has_city] => 1
)

[2025-11-17 11:35:05] [debug] LGL Constituents: âœ… Address set and added to array Array
(
    [street] => 57 Blake Street
    [city] => Greenville
    [address_data_count] => 1
    [address_entry] => Array
        (
            [street] => 57 Blake Street
            [street_address_type_id] => 1
            [street_type_name] => Home
            [city] => Greenville
            [state] => SC
            [postal_code] => 29605
            [county] => 
            [country] => US
            [seasonal_from] => 01-01
            [seasonal_to] => 12-31
            [seasonal] => 
            [is_preferred] => 1
            [not_current] => 
        )

)

[2025-11-17 11:35:05] [debug] LGL Constituents: ðŸŽ¯ setMembership() CALLED! Array
(
    [user_id] => 1958
)

[2025-11-17 11:35:05] [debug] LGL Constituents: ðŸ” Looking up membership level config Array
(
    [membership_type] => Individual
    [user_id] => 1958
)

[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() called
[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings: settingsHandler is SET
[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() called, raw result: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

)

[2025-11-17 11:35:05] [debug] ðŸ” ApiSettings::getMembershipLevels() returning: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

)

[2025-11-17 11:35:05] [debug] LGL Constituents: ðŸ” Membership level config from user meta Array
(
    [membership_level_id] => 412
    [found] => YES
)

[2025-11-17 11:35:05] [debug] LGL Constituents: ðŸ“‹ Final level config Array
(
    [level_name] => Individual
    [level_slug] => individual
    [lgl_membership_level_id] => 412
)

[2025-11-17 11:35:05] [debug] LGL Constituents: Modern Membership Data Created Array
(
    [user_id] => 1958
    [membership_type] => Individual
    [level_config] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [membership_data] => Array
        (
            [membership_level_id] => 412
            [membership_level_name] => Individual
            [date_start] => 2025-11-17
            [finish_date] => 2026-11-17
            [note] => Membership created via Modern LGL API on 2025-11-17
        )

)

[2025-11-17 11:35:05] [debug] LGL Constituents: Final Membership Data Set Array
(
    [membership_level_id] => 412
    [membership_level_name] => Individual
    [date_start] => 2025-11-17
    [finish_date] => 2026-11-17
    [note] => Membership created via Modern LGL API on 2025-11-17
)

[2025-11-17 11:35:05] [debug] LGL Constituents: All data set for user 1958
[2025-11-17 11:35:05] [debug] LGL Constituents: Name set Array
(
    [first_name] => Andrew
    [last_name] => Skinner
    [is_org] => 
    [constituent_contact_type_id] => 1247
    [constituent_contact_type_name] => Primary
    [addressee] => Andrew Skinner
    [salutation] => Andrew
    [sort_name] => Skinner, Andrew
    [is_deceased] => 
    [annual_report_name] => Andrew Skinner
    [date_added] => 2025-11-17
    [is_anon] => 
)

[2025-11-17 11:35:05] [debug] LGL Constituents: Email already set, skipping duplicate andrew@hispanicalliancesc.com
[2025-11-17 11:35:05] [debug] LGL Constituents: Phone set 8653120285
[2025-11-17 11:35:05] [debug] ðŸ”§ buildUpdateData: Including email addresses Array
(
    [count] => 1
    [emails] => Array
        (
            [0] => andrew@hispanicalliancesc.com
        )

)

[2025-11-17 11:35:05] [debug] ðŸ”§ buildUpdateData: Including phone numbers Array
(
    [count] => 2
    [phones] => Array
        (
            [0] => 8642560760
            [1] => 8653120285
        )

)

[2025-11-17 11:35:05] [debug] ðŸ”§ buildUpdateData: Including street addresses Array
(
    [count] => 1
    [addresses] => Array
        (
            [0] => 57 Blake Street
        )

)

[2025-11-17 11:35:05] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:35:06] [debug] Rate Limiter: Request recorded. Total in window: 4
[2025-11-17 11:35:06] [debug] LGL Constituents: Constituent updated successfully Array
(
    [success] => 1
    [http_code] => 200
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 947132
            [external_constituent_id] => 
            [is_org] => 
            [constituent_contact_type_id] => 1247
            [constituent_contact_type_name] => Primary
            [prefix] => 
            [first_name] => Andrew
            [middle_name] => 
            [last_name] => Skinner
            [suffix] => 
            [spouse_name] => 
            [org_name] => 
            [job_title] => 
            [addressee] => Andrew Skinner
            [salutation] => Andrew
            [sort_name] => Skinner, Andrew
            [constituent_interest_level_id] => 
            [constituent_interest_level_name] => 
            [constituent_rating_id] => 
            [constituent_rating_name] => 
            [is_deceased] => 
            [deceased_date] => 
            [annual_report_name] => Andrew Skinner
            [birthday] => 
            [gender] => 
            [maiden_name] => 
            [nick_name] => 
            [spouse_nick_name] => 
            [date_added] => 2025-11-17
            [alt_salutation] => Andrew
            [alt_addressee] => Andrew Skinner
            [honorary_name] => Andrew Skinner
            [assistant_name] => 
            [marital_status_id] => 
            [marital_status_name] => 
            [is_anon] => 
            [created_at] => 2025-11-17T15:43:34Z
            [updated_at] => 2025-11-17T16:35:06Z
            [class_affiliations] => Array
                (
                )

            [relationships] => Array
                (
                    [0] => Array
                        (
                            [id] => 92
                            [relationship_type_id] => 77
                            [constituent_id] => 947132
                            [related_constituent_id] => 947167
                            [name] => Child
                            [description] => 
                            [auto_soft_credit] => 
                            [also_acknowledge] => 
                            [share_address] => 
                            [share_phone] => 
                        )

                )

            [street_addresses] => Array
                (
                    [0] => Array
                        (
                            [id] => 840422
                            [street] => 57 Blake Street
                            [city] => Greenville
                            [state] => SC
                            [country] => US
                            [postal_code] => 29605
                            [county] => 
                            [street_address_type_id] => 1
                            [street_type_name] => Home
                            [is_preferred] => 1
                            [not_current] => 
                            [parent_id] => 
                            [seasonal_from] => 01-01
                            [seasonal_to] => 12-31
                            [seasonal] => 
                            [lat] => 
                            [lng] => 
                            [zip5] => 29605
                            [verified] => 
                            [verified_on] => 
                            [created_at] => 2025-11-17T16:35:06Z
                            [updated_at] => 2025-11-17T16:35:06Z
                        )

                )

            [phone_numbers] => Array
                (
                    [0] => Array
                        (
                            [id] => 482007
                            [number] => 8653120285
                            [phone_number_type_id] => 1
                            [phone_type_name] => Home
                            [is_preferred] => 1
                            [not_current] => 
                            [parent_id] => 
                            [normalized_number] => 8653120285
                            [created_at] => 2025-11-17T16:35:06Z
                            [updated_at] => 2025-11-17T16:35:06Z
                        )

                    [1] => Array
                        (
                            [id] => 482002
                            [number] => 8642560760
                            [phone_number_type_id] => 1
                            [phone_type_name] => Home
                            [is_preferred] => 
                            [not_current] => 
                            [parent_id] => 
                            [normalized_number] => 8642560760
                            [created_at] => 2025-11-17T16:35:06Z
                            [updated_at] => 2025-11-17T16:35:06Z
                        )

                )

            [email_addresses] => Array
                (
                    [0] => Array
                        (
                            [id] => 279172
                            [address] => andrew@hispanicalliancesc.com
                            [email_address_type_id] => 1
                            [email_type_name] => Home
                            [is_preferred] => 1
                            [not_current] => 
                            [parent_id] => 
                            [created_at] => 2025-11-17T16:35:06Z
                            [updated_at] => 2025-11-17T16:35:06Z
                        )

                )

            [web_addresses] => Array
                (
                )

            [categories] => Array
                (
                    [0] => Array
                        (
                            [id] => 1287
                            [item_type] => Constituent
                            [name] => Giving Status
                            [key] => giving_status
                            [facet_type] => list
                            [ordinal] => 100
                            [removable] => 
                            [editable] => 
                            [display_format] => compact
                            [keywords] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 12777
                                            [category_id] => 1287
                                            [name] => Top 100 Donor
                                            [description] => 
                                            [short_code] => top_100_donor
                                            [ordinal] => 0
                                            [removable] => 
                                            [can_change] => 1
                                            [can_select] => 1
                                            [created_at] => 2023-02-25T00:56:33Z
                                            [updated_at] => 2023-02-25T00:56:33Z
                                        )

                                    [1] => Array
                                        (
                                            [id] => 12797
                                            [category_id] => 1287
                                            [name] => Non Donor
                                            [description] => 
                                            [short_code] => non_donor
                                            [ordinal] => 4
                                            [removable] => 
                                            [can_change] => 1
                                            [can_select] => 1
                                            [created_at] => 2023-02-25T00:56:33Z
                                            [updated_at] => 2023-02-25T00:56:33Z
                                        )

                                )

                        )

                )

            [groups] => Array
                (
                )

            [memberships] => Array
                (
                    [0] => Array
                        (
                            [id] => 4082
                            [constituent_id] => 947132
                            [membership_level_id] => 412
                            [membership_level_name] => Individual
                            [date_start] => 2025-11-17
                            [finish_date] => 2026-11-17
                            [note] => Membership created via Modern LGL API on 2025-11-17
                            [created_at] => 2025-11-17T15:54:31Z
                            [updated_at] => 2025-11-17T16:32:04Z
                        )

                    [1] => Array
                        (
                            [id] => 4077
                            [constituent_id] => 947132
                            [membership_level_id] => 412
                            [membership_level_name] => Individual
                            [date_start] => 2025-11-17
                            [finish_date] => 2025-11-17
                            [note] => Membership ended via WooCommerce renewal on 2025-11-17
                            [created_at] => 2025-11-17T15:43:40Z
                            [updated_at] => 2025-11-17T16:32:05Z
                        )

                )

            [custom_attrs] => Array
                (
                )

        )

    [raw_response] => {"api_version":"1.0","id":947132,"external_constituent_id":null,"is_org":false,"constituent_contact_type_id":1247,"constituent_contact_type_name":"Primary","prefix":null,"first_name":"Andrew","middle_name":null,"last_name":"Skinner","suffix":null,"spouse_name":null,"org_name":null,"job_title":null,"addressee":"Andrew Skinner","salutation":"Andrew","sort_name":"Skinner, Andrew","constituent_interest_level_id":null,"constituent_interest_level_name":null,"constituent_rating_id":null,"constituent_rating_name":null,"is_deceased":false,"deceased_date":null,"annual_report_name":"Andrew Skinner","birthday":null,"gender":null,"maiden_name":null,"nick_name":null,"spouse_nick_name":null,"date_added":"2025-11-17","alt_salutation":"Andrew","alt_addressee":"Andrew Skinner","honorary_name":"Andrew Skinner","assistant_name":null,"marital_status_id":null,"marital_status_name":null,"is_anon":false,"created_at":"2025-11-17T15:43:34Z","updated_at":"2025-11-17T16:35:06Z","class_affiliations":[],"relationships":[{"id":92,"relationship_type_id":77,"constituent_id":947132,"related_constituent_id":947167,"name":"Child","description":null,"auto_soft_credit":false,"also_acknowledge":false,"share_address":null,"share_phone":null}],"street_addresses":[{"id":840422,"street":"57 Blake Street","city":"Greenville","state":"SC","country":"US","postal_code":"29605","county":"","street_address_type_id":1,"street_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"seasonal_from":"01-01","seasonal_to":"12-31","seasonal":false,"lat":null,"lng":null,"zip5":"29605","verified":false,"verified_on":null,"created_at":"2025-11-17T16:35:06Z","updated_at":"2025-11-17T16:35:06Z"}],"phone_numbers":[{"id":482007,"number":"8653120285","phone_number_type_id":1,"phone_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"normalized_number":"8653120285","created_at":"2025-11-17T16:35:06Z","updated_at":"2025-11-17T16:35:06Z"},{"id":482002,"number":"8642560760","phone_number_type_id":1,"phone_type_name":"Home","is_preferred":false,"not_current":false,"parent_id":null,"normalized_number":"8642560760","created_at":"2025-11-17T16:35:06Z","updated_at":"2025-11-17T16:35:06Z"}],"email_addresses":[{"id":279172,"address":"andrew@hispanicalliancesc.com","email_address_type_id":1,"email_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"created_at":"2025-11-17T16:35:06Z","updated_at":"2025-11-17T16:35:06Z"}],"web_addresses":[],"categories":[{"id":1287,"item_type":"Constituent","name":"Giving Status","key":"giving_status","facet_type":"list","ordinal":100,"removable":false,"editable":false,"display_format":"compact","keywords":[{"id":12777,"category_id":1287,"name":"Top 100 Donor","description":null,"short_code":"top_100_donor","ordinal":0,"removable":false,"can_change":true,"can_select":true,"created_at":"2023-02-25T00:56:33Z","updated_at":"2023-02-25T00:56:33Z"},{"id":12797,"category_id":1287,"name":"Non Donor","description":null,"short_code":"non_donor","ordinal":4,"removable":false,"can_change":true,"can_select":true,"created_at":"2023-02-25T00:56:33Z","updated_at":"2023-02-25T00:56:33Z"}]}],"groups":[],"memberships":[{"id":4082,"constituent_id":947132,"membership_level_id":412,"membership_level_name":"Individual","date_start":"2025-11-17","finish_date":"2026-11-17","note":"Membership created via Modern LGL API on 2025-11-17","created_at":"2025-11-17T15:54:31Z","updated_at":"2025-11-17T16:32:04Z"},{"id":4077,"constituent_id":947132,"membership_level_id":412,"membership_level_name":"Individual","date_start":"2025-11-17","finish_date":"2025-11-17","note":"Membership ended via WooCommerce renewal on 2025-11-17","created_at":"2025-11-17T15:43:40Z","updated_at":"2025-11-17T16:32:05Z"}],"custom_attrs":[]}
)

[2025-11-17 11:35:06] [debug] LGL Cache: DELETED key constituent_947132
[2025-11-17 11:35:06] [debug] LGL Cache: SET key constituent_947132 (TTL: 3600s)
[2025-11-17 11:35:06] [debug] Rate Limiter: Waiting 767.951171875ms before next request
[2025-11-17 11:35:07] [debug] Rate Limiter: Request recorded. Total in window: 5
[2025-11-17 11:35:07] [debug] âœ… MembershipRegistrationService: Constituent updated (Step 1/5) Array
(
    [lgl_id] => 947132
    [http_code] => 200
    [skip_membership] => 
)

[2025-11-17 11:35:07] [debug] Rate Limiter: Waiting 475.94287109375ms before next request
[2025-11-17 11:35:08] [debug] ðŸ” RAW JSON PAYLOAD: {"address":"andrew@hispanicalliancesc.com","email_address_type_id":1,"email_type_name":"Home","is_preferred":true,"not_current":false}
[2025-11-17 11:35:08] [debug] Rate Limiter: Request recorded. Total in window: 6
[2025-11-17 11:35:08] [debug] âœ… MembershipRegistrationService: Email added (Step 2/4) Array
(
    [lgl_id] => 947132
    [success] => 1
    [response] => Array
        (
            [success] => 1
            [http_code] => 200
            [data] => Array
                (
                    [api_version] => 1.0
                    [id] => 279177
                    [item_id] => 947132
                    [item_type] => Constituent
                    [address] => andrew@hispanicalliancesc.com
                    [email_address_type_id] => 1
                    [email_type_name] => Home
                    [is_preferred] => 1
                    [not_current] => 
                    [parent_id] => 
                    [created_at] => 2025-11-17T16:35:08Z
                    [updated_at] => 2025-11-17T16:35:08Z
                )

            [raw_response] => {"api_version":"1.0","id":279177,"item_id":947132,"item_type":"Constituent","address":"andrew@hispanicalliancesc.com","email_address_type_id":1,"email_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"created_at":"2025-11-17T16:35:08Z","updated_at":"2025-11-17T16:35:08Z"}
        )

)

[2025-11-17 11:35:08] [debug] Rate Limiter: Waiting 564.06689453125ms before next request
[2025-11-17 11:35:09] [debug] ðŸ” RAW JSON PAYLOAD: {"number":"8642560760","phone_number_type_id":1,"phone_type_name":"Home","is_preferred":true,"not_current":false}
[2025-11-17 11:35:09] [debug] Rate Limiter: Request recorded. Total in window: 7
[2025-11-17 11:35:09] [debug] âœ… MembershipRegistrationService: Phone added (Step 3/4) Array
(
    [lgl_id] => 947132
    [success] => 1
    [response] => Array
        (
            [success] => 1
            [http_code] => 200
            [data] => Array
                (
                    [api_version] => 1.0
                    [id] => 482012
                    [item_id] => 947132
                    [item_type] => Constituent
                    [number] => 8642560760
                    [phone_number_type_id] => 1
                    [phone_type_name] => Home
                    [is_preferred] => 1
                    [not_current] => 
                    [parent_id] => 
                    [normalized_number] => 8642560760
                    [created_at] => 2025-11-17T16:35:09Z
                    [updated_at] => 2025-11-17T16:35:09Z
                )

            [raw_response] => {"api_version":"1.0","id":482012,"item_id":947132,"item_type":"Constituent","number":"8642560760","phone_number_type_id":1,"phone_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"normalized_number":"8642560760","created_at":"2025-11-17T16:35:09Z","updated_at":"2025-11-17T16:35:09Z"}
        )

)

[2025-11-17 11:35:09] [debug] Rate Limiter: Waiting 521.0009765625ms before next request
[2025-11-17 11:35:10] [debug] ðŸ” RAW JSON PAYLOAD: {"number":"8653120285","phone_number_type_id":1,"phone_type_name":"Home","is_preferred":true,"not_current":false}
[2025-11-17 11:35:10] [debug] Rate Limiter: Request recorded. Total in window: 8
[2025-11-17 11:35:10] [debug] âœ… MembershipRegistrationService: Phone added (Step 3/4) Array
(
    [lgl_id] => 947132
    [success] => 1
    [response] => Array
        (
            [success] => 1
            [http_code] => 200
            [data] => Array
                (
                    [api_version] => 1.0
                    [id] => 482017
                    [item_id] => 947132
                    [item_type] => Constituent
                    [number] => 8653120285
                    [phone_number_type_id] => 1
                    [phone_type_name] => Home
                    [is_preferred] => 1
                    [not_current] => 
                    [parent_id] => 
                    [normalized_number] => 8653120285
                    [created_at] => 2025-11-17T16:35:10Z
                    [updated_at] => 2025-11-17T16:35:10Z
                )

            [raw_response] => {"api_version":"1.0","id":482017,"item_id":947132,"item_type":"Constituent","number":"8653120285","phone_number_type_id":1,"phone_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"normalized_number":"8653120285","created_at":"2025-11-17T16:35:10Z","updated_at":"2025-11-17T16:35:10Z"}
        )

)

[2025-11-17 11:35:10] [debug] LGL Constituents: ðŸ” getAddressData: Returning address data Array
(
    [count] => 1
    [data] => Array
        (
            [0] => Array
                (
                    [street] => 57 Blake Street
                    [street_address_type_id] => 1
                    [street_type_name] => Home
                    [city] => Greenville
                    [state] => SC
                    [postal_code] => 29605
                    [county] => 
                    [country] => US
                    [seasonal_from] => 01-01
                    [seasonal_to] => 12-31
                    [seasonal] => 
                    [is_preferred] => 1
                    [not_current] => 
                )

        )

)

[2025-11-17 11:35:10] [debug] ðŸ” MembershipRegistrationService: Checking address data Array
(
    [lgl_id] => 947132
    [address_data_count] => 1
    [address_data] => Array
        (
            [0] => Array
                (
                    [street] => 57 Blake Street
                    [street_address_type_id] => 1
                    [street_type_name] => Home
                    [city] => Greenville
                    [state] => SC
                    [postal_code] => 29605
                    [county] => 
                    [country] => US
                    [seasonal_from] => 01-01
                    [seasonal_to] => 12-31
                    [seasonal] => 
                    [is_preferred] => 1
                    [not_current] => 
                )

        )

)

[2025-11-17 11:35:10] [debug] ðŸ” addStreetAddressSafe: Checking for duplicate Array
(
    [lgl_id] => 947132
    [street] => 57 Blake Street
    [city] => Greenville
    [postal_code] => 29605
)

[2025-11-17 11:35:10] [debug] Rate Limiter: Waiting 577.51806640625ms before next request
[2025-11-17 11:35:11] [debug] Rate Limiter: Request recorded. Total in window: 9
[2025-11-17 11:35:11] [debug] ðŸ” getConstituentAddresses: Items array format Array
(
    [count] => 1
)

[2025-11-17 11:35:11] [debug] ðŸ” addStreetAddressSafe: Found existing addresses Array
(
    [count] => 1
)

[2025-11-17 11:35:11] [debug] âš ï¸ Address already exists, skipping duplicate Array
(
    [lgl_id] => 947132
    [street] => 57 Blake Street
    [address_id] => 840422
)

[2025-11-17 11:35:11] [debug] âš ï¸ MembershipRegistrationService: Address skipped (already exists) Array
(
    [lgl_id] => 947132
    [street] => 57 Blake Street
)

[2025-11-17 11:35:11] [debug] ðŸ” Connection::getMemberships() Array
(
    [endpoint] => constituents/947132/memberships
    [lgl_id] => 947132
)

[2025-11-17 11:35:11] [debug] Rate Limiter: Waiting 498.89794921875ms before next request
[2025-11-17 11:35:12] [debug] Rate Limiter: Request recorded. Total in window: 10
[2025-11-17 11:35:12] [debug] ðŸ“¥ Memberships Response Array
(
    [success] => 1
    [count] => 2
)

[2025-11-17 11:35:12] [debug] ðŸ”„ Deactivating old active memberships Array
(
    [lgl_id] => 947132
    [active_count] => 2
    [total_count] => 2
)

[2025-11-17 11:35:12] [debug] ðŸ”„ Connection::updateMembership() - Using direct endpoint Array
(
    [endpoint] => memberships/4077
    [membership_id] => 4077
    [membership_data] => Array
        (
            [id] => 4077
            [membership_level_id] => 412
            [membership_level_name] => Individual
            [date_start] => 2025-11-17
            [finish_date] => 2025-11-17
            [note] => Membership ended via WooCommerce renewal on 2025-11-17
        )

)

[2025-11-17 11:35:12] [debug] Rate Limiter: Waiting 636.52001953125ms before next request
[2025-11-17 11:35:13] [debug] Rate Limiter: Request recorded. Total in window: 11
[2025-11-17 11:35:13] [debug] ðŸ“¥ Membership Update Response Array
(
    [success] => 1
    [http_code] => 200
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 4077
            [constituent_id] => 947132
            [membership_level_id] => 412
            [membership_level_name] => Individual
            [date_start] => 2025-11-17
            [finish_date] => 2025-11-17
            [note] => Membership ended via WooCommerce renewal on 2025-11-17
            [created_at] => 2025-11-17T15:43:40Z
            [updated_at] => 2025-11-17T16:35:13Z
        )

    [raw_response] => {"api_version":"1.0","id":4077,"constituent_id":947132,"membership_level_id":412,"membership_level_name":"Individual","date_start":"2025-11-17","finish_date":"2025-11-17","note":"Membership ended via WooCommerce renewal on 2025-11-17","created_at":"2025-11-17T15:43:40Z","updated_at":"2025-11-17T16:35:13Z"}
)

[2025-11-17 11:35:13] [debug] âœ… Membership updated successfully Array
(
    [membership_id] => 4077
)

[2025-11-17 11:35:13] [debug] âœ… Deactivated membership Array
(
    [membership_id] => 4077
)

[2025-11-17 11:35:13] [debug] ðŸ”„ Connection::updateMembership() - Using direct endpoint Array
(
    [endpoint] => memberships/4082
    [membership_id] => 4082
    [membership_data] => Array
        (
            [id] => 4082
            [membership_level_id] => 412
            [membership_level_name] => Individual
            [date_start] => 2025-11-17
            [finish_date] => 2025-11-17
            [note] => Membership ended via WooCommerce renewal on 2025-11-17
        )

)

[2025-11-17 11:35:13] [debug] Rate Limiter: Waiting 624.31982421875ms before next request
[2025-11-17 11:35:14] [debug] Rate Limiter: Request recorded. Total in window: 12
[2025-11-17 11:35:14] [debug] ðŸ“¥ Membership Update Response Array
(
    [success] => 1
    [http_code] => 200
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 4082
            [constituent_id] => 947132
            [membership_level_id] => 412
            [membership_level_name] => Individual
            [date_start] => 2025-11-17
            [finish_date] => 2025-11-17
            [note] => Membership ended via WooCommerce renewal on 2025-11-17
            [created_at] => 2025-11-17T15:54:31Z
            [updated_at] => 2025-11-17T16:35:14Z
        )

    [raw_response] => {"api_version":"1.0","id":4082,"constituent_id":947132,"membership_level_id":412,"membership_level_name":"Individual","date_start":"2025-11-17","finish_date":"2025-11-17","note":"Membership ended via WooCommerce renewal on 2025-11-17","created_at":"2025-11-17T15:54:31Z","updated_at":"2025-11-17T16:35:14Z"}
)

[2025-11-17 11:35:14] [debug] âœ… Membership updated successfully Array
(
    [membership_id] => 4082
)

[2025-11-17 11:35:14] [debug] âœ… Deactivated membership Array
(
    [membership_id] => 4082
)

[2025-11-17 11:35:14] [debug] LGL Membership Payload Array
(
    [endpoint] => constituents/947132/memberships
    [payload] => Array
        (
            [membership_level_id] => 412
            [membership_level_name] => Individual
            [date_start] => 2025-11-17
            [finish_date] => 2026-11-17
            [note] => Membership created via Modern LGL API on 2025-11-17
        )

)

[2025-11-17 11:35:14] [debug] Rate Limiter: Waiting 566.72607421875ms before next request
[2025-11-17 11:35:15] [debug] ðŸ” RAW JSON PAYLOAD: {"membership_level_id":412,"membership_level_name":"Individual","date_start":"2025-11-17","finish_date":"2026-11-17","note":"Membership created via Modern LGL API on 2025-11-17"}
[2025-11-17 11:35:15] [debug] Rate Limiter: Request recorded. Total in window: 13
[2025-11-17 11:35:15] [debug] LGL Membership Response Array
(
    [success] => 1
    [http_code] => 200
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 4087
            [constituent_id] => 947132
            [membership_level_id] => 412
            [membership_level_name] => Individual
            [date_start] => 2025-11-17
            [finish_date] => 2026-11-17
            [note] => Membership created via Modern LGL API on 2025-11-17
            [created_at] => 2025-11-17T16:35:15Z
            [updated_at] => 2025-11-17T16:35:15Z
        )

    [raw_response] => {"api_version":"1.0","id":4087,"constituent_id":947132,"membership_level_id":412,"membership_level_name":"Individual","date_start":"2025-11-17","finish_date":"2026-11-17","note":"Membership created via Modern LGL API on 2025-11-17","created_at":"2025-11-17T16:35:15Z","updated_at":"2025-11-17T16:35:15Z"}
)

[2025-11-17 11:35:15] [debug] âœ… MembershipRegistrationService: New membership added (Step 5/5) Array
(
    [lgl_id] => 947132
    [success] => 1
    [response] => Array
        (
            [success] => 1
            [http_code] => 200
            [data] => Array
                (
                    [api_version] => 1.0
                    [id] => 4087
                    [constituent_id] => 947132
                    [membership_level_id] => 412
                    [membership_level_name] => Individual
                    [date_start] => 2025-11-17
                    [finish_date] => 2026-11-17
                    [note] => Membership created via Modern LGL API on 2025-11-17
                    [created_at] => 2025-11-17T16:35:15Z
                    [updated_at] => 2025-11-17T16:35:15Z
                )

            [raw_response] => {"api_version":"1.0","id":4087,"constituent_id":947132,"membership_level_id":412,"membership_level_name":"Individual","date_start":"2025-11-17","finish_date":"2026-11-17","note":"Membership created via Modern LGL API on 2025-11-17","created_at":"2025-11-17T16:35:15Z","updated_at":"2025-11-17T16:35:15Z"}
        )

)

[2025-11-17 11:35:15] [debug] LGL Connection: Cache HIT for constituents/947132
[2025-11-17 11:35:15] [debug] ðŸ” LGL Payments: retrievePaymentTypes called Array
(
    [method] => Memberships
)

[2025-11-17 11:35:15] [debug] LGL Cache: GET MISS for key payment_types_a7a7b26872b3e2d00de7bb7b1452b5a8
[2025-11-17 11:35:15] [debug] ðŸ” LGL Payments: No cache, making API requests...
[2025-11-17 11:35:15] [debug] LGL Cache: GET MISS for key api_request_aaeb127445991344eb9d8c32705ed172
[2025-11-17 11:35:15] [debug] Rate Limiter: Waiting 498.36401367188ms before next request
[2025-11-17 11:35:16] [debug] Rate Limiter: Request recorded. Total in window: 14
[2025-11-17 11:35:16] [debug] LGL Cache: SET key api_request_aaeb127445991344eb9d8c32705ed172 (TTL: 3600s)
[2025-11-17 11:35:16] [debug] LGL Cache: GET MISS for key api_request_6e3ba696cc9949cba84254d6d298c22b
[2025-11-17 11:35:16] [debug] Rate Limiter: Waiting 548.9951171875ms before next request
[2025-11-17 11:35:17] [debug] Rate Limiter: Request recorded. Total in window: 15
[2025-11-17 11:35:17] [debug] LGL Cache: SET key api_request_6e3ba696cc9949cba84254d6d298c22b (TTL: 3600s)
[2025-11-17 11:35:17] [debug] LGL Cache: GET MISS for key api_request_2096fd49001738ce285c5cb8f61abaf5
[2025-11-17 11:35:17] [debug] Rate Limiter: Waiting 485.80493164062ms before next request
[2025-11-17 11:35:18] [debug] Rate Limiter: Request recorded. Total in window: 16
[2025-11-17 11:35:18] [debug] LGL Cache: SET key api_request_2096fd49001738ce285c5cb8f61abaf5 (TTL: 3600s)
[2025-11-17 11:35:18] [debug] LGL Cache: GET MISS for key api_request_164c8af342666973ed856fbb42dc4600
[2025-11-17 11:35:18] [debug] Rate Limiter: Waiting 528.73315429688ms before next request
[2025-11-17 11:35:19] [debug] Rate Limiter: Request recorded. Total in window: 17
[2025-11-17 11:35:19] [debug] LGL Cache: SET key api_request_164c8af342666973ed856fbb42dc4600 (TTL: 3600s)
[2025-11-17 11:35:19] [debug] LGL Cache: GET MISS for key api_request_0ca4268ca4a8b1bc6be73e2ebd2dbae4
[2025-11-17 11:35:19] [debug] Rate Limiter: Waiting 569.7900390625ms before next request
[2025-11-17 11:35:20] [debug] Rate Limiter: Request recorded. Total in window: 18
[2025-11-17 11:35:20] [debug] LGL Cache: SET key api_request_0ca4268ca4a8b1bc6be73e2ebd2dbae4 (TTL: 3600s)
[2025-11-17 11:35:20] [debug] LGL Cache: SET key payment_types_a7a7b26872b3e2d00de7bb7b1452b5a8 (TTL: 1800s)
[2025-11-17 11:35:20] [debug] LGL Payments: Payment types retrieved Array
(
    [method] => Memberships
    [count] => 7
)

[2025-11-17 11:35:20] [debug] LGL Payments: Payment data retrieved Array
(
    [method] => Memberships
    [data_keys] => Array
        (
            [0] => payment_types
            [1] => gift_types
            [2] => funds
            [3] => campaigns
            [4] => categories
            [5] => method
            [6] => retrieved_at
        )

    [funds_count] => 9
    [campaigns_count] => 7
    [payment_types_count] => 7
)

[2025-11-17 11:35:20] [debug] LGL Payments: Fund ID detection by category Array
(
    [product_id] => 89880
    [parent_id] => 89880
    [product_type] => simple
    [categories] => Array
        (
            [0] => memberships
        )

)

[2025-11-17 11:35:20] [debug] LGL Payments: Membership category detected Array
(
    [fund_id] => 2437
)

[2025-11-17 11:35:20] [debug] ðŸ’³ Connection::addPayment() Array
(
    [lgl_id] => 947132
    [payment_data] => Array
        (
            [external_id] => 90163
            [is_anon] => 
            [gift_type_id] => 5
            [gift_type_name] => Other Income
            [gift_category_id] => 6002
            [gift_category_name] => Donation
            [campaign_id] => 857
            [campaign_name] => Membership Fees
            [fund_id] => 2437
            [fund_name] => 
            [appeal_id] => 0
            [appeal_name] => 
            [event_id] => 0
            [event_name] => 
            [received_amount] => 77.63
            [received_date] => 2025-11-17
            [payment_type_id] => 1547
            [payment_type_name] => stripe_cc
            [check_number] => 
            [deductible_amount] => 77.63
            [note] => Website Registration, Order #90163
            [ack_template_name] => 
            [deposit_date] => 2025-11-17
            [deposited_amount] => 77.63
            [parent_gift_id] => 0
            [parent_external_id] => 0
            [team_member] => 
        )

)

[2025-11-17 11:35:20] [debug] Rate Limiter: Waiting 605.958984375ms before next request
[2025-11-17 11:35:21] [debug] ðŸ” RAW JSON PAYLOAD: {"external_id":90163,"is_anon":false,"gift_type_id":"5","gift_type_name":"Other Income","gift_category_id":"6002","gift_category_name":"Donation","campaign_id":"857","campaign_name":"Membership Fees","fund_id":2437,"fund_name":"","appeal_id":0,"appeal_name":"","event_id":0,"event_name":"","received_amount":"77.63","received_date":"2025-11-17","payment_type_id":"1547","payment_type_name":"stripe_cc","check_number":"","deductible_amount":"77.63","note":"Website Registration, Order #90163","ack_template_name":"","deposit_date":"2025-11-17","deposited_amount":"77.63","parent_gift_id":0,"parent_external_id":0,"team_member":""}
[2025-11-17 11:35:21] [debug] Rate Limiter: Request recorded. Total in window: 19
[2025-11-17 11:35:21] [debug] âœ… Payment added successfully Array
(
    [payment_id] => 905622
)

[2025-11-17 11:35:21] [debug] LGL Payments: Membership payment created Array
(
    [lgl_id] => 947132
    [order_id] => 90163
    [amount] => 77.63
)

[2025-11-17 11:35:21] [debug] LGL Cache: SET key payment_905622 (TTL: 3600s)
[2025-11-17 11:35:21] [debug] âœ… MembershipRegistrationService: Payment created Array
(
    [payment_id] => 905622
    [lgl_id] => 947132
    [order_id] => 90163
    [amount] => 77.63
)

[2025-11-17 11:35:21] [debug] LGL Cache: GET MISS for key api_request_1680885fef65332f4e636ca72c40d52a
[2025-11-17 11:35:21] [debug] Rate Limiter: Waiting 409.80615234375ms before next request
[2025-11-17 11:35:22] [debug] Rate Limiter: Request recorded. Total in window: 20
[2025-11-17 11:35:22] [debug] âœ… MembershipOrderHandler::registerUserInLGL() COMPLETED Array
(
    [user_id] => 1958
    [lgl_id] => 947132
    [status] => partial
)

[2025-11-17 11:35:22] [debug] âœ… MembershipOrderHandler::processOrderLglSync() COMPLETED Array
(
    [order_id] => 90163
    [user_id] => 1958
    [lgl_id] => 947132
    [match_method] => user_meta
    [payment_id] => 905622
)

[2025-11-17 11:35:22] [debug] âœ… OrderProcessor: MembershipOrderHandler (LGL sync) completed
[2025-11-17 11:35:22] [debug] âœ… OrderProcessor::processOrderProductsLglSync() COMPLETED Array
(
    [products_processed] => 1
    [events_processed] => 0
)

[2025-11-17 11:35:22] [debug] âœ… OrderProcessor::processLglSyncOnly() COMPLETED Array
(
    [order_id] => 90163
)

[2025-11-17 11:35:22] [debug] âœ… AsyncOrderProcessor: Async processing completed Array
(
    [order_id] => 90163
)

[2025-11-17 11:35:44] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:44] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:45] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:46] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:46] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:35:46] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:46] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:35:48] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:48] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:35:49] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:50] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:35:52] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:35:52] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:01] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:01] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:01] [debug] LGL Relations Manager: User to order relation created 1958_90164
[2025-11-17 11:36:03] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-17 11:36:03] [debug] LGL Email Blocker: Evaluation - To: Linley@upstateinternational.org | Subject: [Upstate International] New customer order (90164) - November 17, 2025 | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-17 11:36:03] [debug] LGL Email Blocker: BLOCKED email - To: Linley@upstateinternational.org | Subject: [Upstate International] New customer order (90164) - November 17, 2025 | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-17 11:36:03] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-17 11:36:03] [debug] OrderEmailCustomizer: Rendered email template Array
(
    [template] => event-no-lunch.html
    [order_id] => 90164
    [product_id] => 88446
)

[2025-11-17 11:36:03] [debug] LGL Email Blocker: Evaluation - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order has been received! | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-17 11:36:03] [debug] LGL Email Blocker: BLOCKED email - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order has been received! | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-17 11:36:03] [debug] ðŸš€ OrderProcessor::processCompletedOrder() STARTED Array
(
    [order_id] => 90164
    [timestamp] => 2025-11-17 11:36:03
    [memory_usage] => 122MB
    [hook] => woocommerce_payment_complete
)

[2025-11-17 11:36:03] [debug] ðŸ“‹ OrderProcessor: Order Details Array
(
    [order_id] => 90164
    [order_status] => processing
    [order_total] => 10.35
    [customer_id] => 1958
    [customer_email] => andrew@hispanicalliancesc.com
    [payment_method] => stripe_cc
    [order_date] => 2025-11-17 11:36:01
    [item_count] => 1
)

[2025-11-17 11:36:03] [debug] ðŸ‘¤ OrderProcessor: Customer Info Array
(
    [user_id] => 1958
    [billing_email] => andrew@hispanicalliancesc.com
    [billing_first_name] => Andrew
    [billing_last_name] => Skinner
    [billing_phone] => 8653120285
)

[2025-11-17 11:36:03] [debug] âš¡ OrderProcessor: Processing immediate tasks...
[2025-11-17 11:36:03] [debug] âš¡ OrderProcessor::processImmediateTasks() STARTED Array
(
    [order_id] => 90164
    [user_id] => 1958
)

[2025-11-17 11:36:03] [debug] OrderProcessor: Payment method updated Array
(
    [user_id] => 1958
    [payment_method] => stripe_cc
    [stored_as] => online
)

[2025-11-17 11:36:03] [debug] âš¡ OrderProcessor::processOrderProductsImmediate() STARTED Array
(
    [total_products] => 1
    [user_id] => 1958
    [order_id] => 90164
    [mode] => immediate_only
)

[2025-11-17 11:36:03] [debug] ðŸ” OrderProcessor: Processing Product #1 (IMMEDIATE) Array
(
    [name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
    [quantity] => 1
    [product_id] => 88450
    [parent_id] => 88446
    [categories] => Array
        (
            [0] => events
        )

)

[2025-11-17 11:36:03] [debug] ðŸŽª OrderProcessor: Processing event (IMMEDIATE) Array
(
    [product_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
)

[2025-11-17 11:36:03] [debug] OrderProcessor: Adding new attendee Skinny
[2025-11-17 11:36:03] [debug] ðŸŽª OrderProcessor::processEventProductImmediate() STARTED Array
(
    [user_id] => 1958
    [order_id] => 90164
    [mode] => immediate_only
)

[2025-11-17 11:36:03] [debug] âš¡ EventOrderHandler::processOrderImmediate() STARTED Array
(
    [user_id] => 1958
    [order_id] => 90164
    [product_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
    [product_id] => 88450
    [parent_id] => 88446
    [quantity] => 1
    [mode] => immediate_only
)

[2025-11-17 11:36:03] [debug] UPDATING USER META FOR:  1958
[2025-11-17 11:36:03] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-17 11:36:03] [debug] OrderEmailCustomizer: Rendered email template Array
(
    [template] => event-no-lunch.html
    [order_id] => 90164
    [product_id] => 88446
)

[2025-11-17 11:36:04] [debug] LGL Email Blocker: Evaluation - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order is now complete | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-17 11:36:04] [debug] LGL Email Blocker: BLOCKED email - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order is now complete | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-17 11:36:04] [debug] âœ… EventOrderHandler::processOrderImmediate() COMPLETED 90164
[2025-11-17 11:36:04] [debug] ðŸ‘¥ OrderProcessor: Creating attendee CCT records 1
[2025-11-17 11:36:04] [debug] WpUsers: Creating event registration CCT via JetEngine API Array
(
    [cct_slug] => _ui_event_registrations
    [user_name] => Andy
    [user_email] => Skinny
    [product_id] => 88450
    [order_id] => 90164
)

[2025-11-17 11:36:04] [debug] WpUsers: Event registration CCT created successfully Array
(
    [item_id] => 585
    [attendee_name] => Andy
)

[2025-11-17 11:36:04] [debug] OrderProcessor: Created attendee CCT records 1
[2025-11-17 11:36:04] [debug] âœ… OrderProcessor::processOrderProductsImmediate() COMPLETED Array
(
    [products_processed] => 1
    [events_processed] => 1
    [attendees_created] => 1
)

[2025-11-17 11:36:04] [debug] âœ… OrderProcessor::processImmediateTasks() COMPLETED Array
(
    [order_id] => 90164
)

[2025-11-17 11:36:04] [debug] â° OrderProcessor: Scheduling async LGL sync...
[2025-11-17 11:36:04] [debug] â° AsyncOrderProcessor: Scheduling async processing (WP Cron) Array
(
    [order_id] => 90164
)

[2025-11-17 11:36:04] [debug] âœ… AsyncOrderProcessor: WP Cron event scheduled Array
(
    [order_id] => 90164
    [hook] => lgl_process_order_async
    [scheduled_for] => 2025-11-17 16:36:04
)

[2025-11-17 11:36:04] [debug] ðŸš€ AsyncOrderProcessor: Triggered cron spawn for immediate execution Array
(
    [order_id] => 90164
)

[2025-11-17 11:36:04] [debug] âœ… OrderProcessor::processCompletedOrder() COMPLETED Array
(
    [order_id] => 90164
    [final_memory_usage] => 122MB
    [async_scheduled] => 1
)

[2025-11-17 11:36:04] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:04] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:04] [debug] ðŸ”„ AsyncOrderProcessor: Processing order async (WP Cron) Array
(
    [order_id] => 90164
    [timestamp] => 2025-11-17 11:36:04
    [cron_hook] => lgl_process_order_async
)

[2025-11-17 11:36:04] [debug] ðŸ”„ OrderProcessor::processLglSyncOnly() STARTED Array
(
    [order_id] => 90164
    [timestamp] => 2025-11-17 11:36:04
)

[2025-11-17 11:36:04] [debug] ðŸ”„ OrderProcessor::processOrderProductsLglSync() STARTED Array
(
    [total_products] => 1
    [user_id] => 1958
    [order_id] => 90164
    [mode] => lgl_sync_only
)

[2025-11-17 11:36:04] [debug] ðŸŽª OrderProcessor: Processing event (LGL SYNC) Array
(
    [product_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
)

[2025-11-17 11:36:04] [debug] ðŸŽª OrderProcessor::processEventProductLglSync() STARTED Array
(
    [user_id] => 1958
    [order_id] => 90164
    [mode] => lgl_sync_only
)

[2025-11-17 11:36:04] [debug] ðŸ”„ EventOrderHandler::processOrderLglSync() STARTED Array
(
    [user_id] => 1958
    [order_id] => 90164
    [product_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
    [product_id] => 88450
    [parent_id] => 88446
    [quantity] => 1
    [mode] => lgl_sync_only
)

[2025-11-17 11:36:04] [debug] EventRegistrationAction: Processing request Array
(
    [user_id] => 1958
    [class_id] => 88450
    [username] => Andrew%20Skinner
    [user_firstname] => Andrew
    [user_lastname] => Skinner
    [user_email] => andrew@hispanicalliancesc.com
    [user_phone] => 8653120285
    [event_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
    [event_price] => 10.35
    [user_preferred_language] => 
    [user_home_country] => 
    [order_notes] => 
    [inserted_post_id] => 90164
    [event_id] => 88450
)

[2025-11-17 11:36:04] [debug] âš ï¸ EventRegistrationAction: Async processor not available, using sync Array
(
    [user_id] => 1958
)

[2025-11-17 11:36:04] [debug] ðŸ” Connection::getConstituentData() Array
(
    [lgl_id] => 947132
)

[2025-11-17 11:36:04] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:05] [debug] Rate Limiter: Request recorded. Total in window: 20
[2025-11-17 11:36:05] [debug] âœ… Constituent data retrieved successfully
[2025-11-17 11:36:05] [debug] LGL USER EXISTS:  947132
[2025-11-17 11:36:05] [debug] ðŸ” LGL Payments: retrievePaymentTypes called Array
(
    [method] => Events
)

[2025-11-17 11:36:05] [debug] LGL Cache: GET MISS for key payment_types_87f9f735a1d36793ceaecd4e47124b63
[2025-11-17 11:36:05] [debug] ðŸ” LGL Payments: No cache, making API requests...
[2025-11-17 11:36:05] [debug] LGL Connection: Cache HIT for payment_types.json
[2025-11-17 11:36:05] [debug] LGL Connection: Cache HIT for funds.json
[2025-11-17 11:36:05] [debug] LGL Connection: Cache HIT for campaigns.json
[2025-11-17 11:36:05] [debug] LGL Connection: Cache HIT for gift_types.json
[2025-11-17 11:36:05] [debug] LGL Connection: Cache HIT for gift_categories.json
[2025-11-17 11:36:05] [debug] LGL Cache: SET key payment_types_87f9f735a1d36793ceaecd4e47124b63 (TTL: 1800s)
[2025-11-17 11:36:05] [debug] LGL Payments: Payment types retrieved Array
(
    [method] => Events
    [count] => 7
)

[2025-11-17 11:36:05] [debug] LGL Payments: Fund ID detection by category Array
(
    [product_id] => 88450
    [parent_id] => 88446
    [product_type] => variation
    [categories] => Array
        (
            [0] => events
        )

)

[2025-11-17 11:36:05] [debug] LGL Payments: Events category detected Array
(
    [fund_id] => 4142
)

[2025-11-17 11:36:05] [debug] ðŸ’³ Connection::addPayment() Array
(
    [lgl_id] => 947132
    [payment_data] => Array
        (
            [external_id] => 90164
            [is_anon] => 
            [gift_type_id] => 5
            [gift_type_name] => Other Income
            [gift_category_id] => 6052
            [gift_category_name] => Event fee
            [campaign_id] => 867
            [campaign_name] => WACU Programming
            [fund_id] => 4142
            [fund_name] => 
            [appeal_id] => 0
            [appeal_name] => 
            [event_id] => 0
            [event_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
            [received_amount] => 10.35
            [received_date] => 2025-11-17
            [payment_type_id] => 1527
            [payment_type_name] => Credit Card
            [check_number] => 
            [deductible_amount] => 10.35
            [note] => Event registration - UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket - Order #90164
            [ack_template_name] => 
            [deposit_date] => 2025-11-17
            [deposited_amount] => 10.35
            [parent_gift_id] => 0
            [parent_external_id] => 0
            [team_member] => 
        )

)

[2025-11-17 11:36:05] [debug] Rate Limiter: Waiting 1063.076171875ms before next request
[2025-11-17 11:36:06] [debug] ðŸ” RAW JSON PAYLOAD: {"external_id":90164,"is_anon":false,"gift_type_id":"5","gift_type_name":"Other Income","gift_category_id":"6052","gift_category_name":"Event fee","campaign_id":"867","campaign_name":"WACU Programming","fund_id":4142,"fund_name":"","appeal_id":0,"appeal_name":"","event_id":0,"event_name":"UIWG Holiday Craft Workshop \u2013 Make and Take<span> - </span>Craft ticket","received_amount":"10.35","received_date":"2025-11-17","payment_type_id":"1527","payment_type_name":"Credit Card","check_number":"","deductible_amount":"10.35","note":"Event registration - UIWG Holiday Craft Workshop \u2013 Make and Take<span> - </span>Craft ticket - Order #90164","ack_template_name":"","deposit_date":"2025-11-17","deposited_amount":"10.35","parent_gift_id":0,"parent_external_id":0,"team_member":""}
[2025-11-17 11:36:06] [debug] Rate Limiter: Request recorded. Total in window: 21
[2025-11-17 11:36:06] [debug] âœ… Payment added successfully Array
(
    [payment_id] => 905627
)

[2025-11-17 11:36:06] [debug] LGL Payments: Event payment created Array
(
    [lgl_id] => 947132
    [order_id] => 90164
    [event_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
    [amount] => 10.35
)

[2025-11-17 11:36:06] [debug] LGL Cache: SET key payment_905627 (TTL: 3600s)
[2025-11-17 11:36:06] [debug] Event payment data:  Array
(
    [success] => 1
    [id] => 905627
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 905627
            [constituent_id] => 947132
            [external_id] => 90164
            [is_anon] => 
            [gift_type_id] => 5
            [gift_type_name] => Other Income
            [gift_category_id] => 6052
            [gift_category_name] => Event Fee
            [campaign_id] => 867
            [campaign_name] => WACU Programming
            [fund_id] => 4142
            [fund_name] => Events
            [appeal_id] => 0
            [appeal_name] => 
            [event_id] => 1247
            [event_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
            [received_amount] => 10.35
            [received_date] => 2025-11-17
            [payment_type_id] => 1527
            [payment_type_name] => Credit Card
            [check_number] => 
            [deductible_amount] => 0
            [note] => Event registration - UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket - Order #90164
            [ack_template_name] => 
            [deposit_date] => 2025-11-17
            [deposited_amount] => 10.35
            [parent_gift_id] => 0
            [parent_external_id] => 
            [tribute_name] => 
            [tributee_name] => 
            [tribute_dedication] => 
            [tribute_recipient_name] => 
            [tribute_recipient_salutation] => 
            [tribute_recipient_email] => 
            [tribute_recipient_address] => 
            [tribute_recipient_notification_template] => 
            [team_member] => 
            [team_member_email] => 
            [custom_fields] => Array
                (
                )

            [created_at] => 2025-11-17T16:36:06Z
            [updated_at] => 2025-11-17T16:36:06Z
        )

)

[2025-11-17 11:36:06] [debug] Event Payment ID:  905627
[2025-11-17 11:36:06] [debug] EventOrderHandler: Event registered in LGL 1958
[2025-11-17 11:36:06] [debug] âœ… EventOrderHandler::processOrderLglSync() COMPLETED 90164
[2025-11-17 11:36:06] [debug] âœ… OrderProcessor::processOrderProductsLglSync() COMPLETED Array
(
    [products_processed] => 1
    [events_processed] => 1
)

[2025-11-17 11:36:06] [debug] âœ… OrderProcessor::processLglSyncOnly() COMPLETED Array
(
    [order_id] => 90164
)

[2025-11-17 11:36:06] [debug] âœ… AsyncOrderProcessor: Async processing completed Array
(
    [order_id] => 90164
)

[2025-11-17 11:36:37] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:37] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:38] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:38] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:38] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:38] [debug] ðŸ” SubscriptionRenewalManager: displayManualRenewalStatus() called Array
(
    [user_id] => 1958
    [show_all] => no
)

[2025-11-17 11:36:38] [debug] ðŸ“Š WC Subscriptions check Array
(
    [user_id] => 1958
    [subscription_count] => 0
    [has_subscriptions] => 
)

[2025-11-17 11:36:38] [debug] ðŸ” Checking for one-time membership (priority check) Array
(
    [user_id] => 1958
)

[2025-11-17 11:36:38] [debug] ðŸ” Getting one-time membership status Array
(
    [user_id] => 1958
)

[2025-11-17 11:36:38] [debug] ðŸ“Š User meta values Array
(
    [user_id] => 1958
    [subscription_status] => one-time
    [renewal_timestamp] => 1794933305
    [start_timestamp] => 1763379305
    [membership_level] => Individual
    [renewal_date_formatted] => 2026-11-17 16:35:05
    [start_date_formatted] => 2025-11-17 11:35:05
)

[2025-11-17 11:36:38] [debug] â° Membership expiration check Array
(
    [user_id] => 1958
    [now] => 2025-11-17 11:36:38
    [renewal_date] => 2026-11-17 16:35:05
    [is_active] => 1
    [seconds_remaining] => 31553907
)

[2025-11-17 11:36:38] [debug] ðŸ“… Days remaining calculated Array
(
    [user_id] => 1958
    [days_remaining] => 366
)

[2025-11-17 11:36:38] [debug] ðŸ” Getting last membership product name Array
(
    [user_id] => 1958
)

[2025-11-17 11:36:38] [debug] ðŸ“¦ Orders found Array
(
    [user_id] => 1958
    [order_count] => 71
)

[2025-11-17 11:36:38] [debug] ðŸ” Checking order Array
(
    [order_id] => 90164
    [order_date] => 2025-11-17 11:36:01
)

[2025-11-17 11:36:38] [debug] ðŸ·ï¸ Checking product Array
(
    [product_id] => 88450
    [product_name] => UIWG Holiday Craft Workshop â€“ Make and Take<span> - </span>Craft ticket
    [has_membership_category] => 
)

[2025-11-17 11:36:38] [debug] ðŸ” Checking order Array
(
    [order_id] => 90163
    [order_date] => 2025-11-17 11:35:02
)

[2025-11-17 11:36:38] [debug] ðŸ·ï¸ Checking product Array
(
    [product_id] => 89880
    [product_name] => Member
    [has_membership_category] => 1
)

[2025-11-17 11:36:38] [debug] âœ… Found membership product Array
(
    [product_name] => Member
    [order_id] => 90163
)

[2025-11-17 11:36:38] [debug] ðŸŽ« Product name retrieved Array
(
    [user_id] => 1958
    [product_name] => Member
)

[2025-11-17 11:36:38] [debug] âœ… One-time membership status compiled Array
(
    [user_id] => 1958
    [status_data] => Array
        (
            [user_id] => 1958
            [membership_level] => Individual
            [product_name] => Member
            [start_date] => November 17, 2025
            [renewal_date] => November 17, 2026
            [days_remaining] => 366
            [is_active] => 1
            [status] => active
        )

)

[2025-11-17 11:36:38] [debug] ðŸ“‹ One-time membership status result Array
(
    [user_id] => 1958
    [status_found] => 1
    [status_data] => Array
        (
            [user_id] => 1958
            [membership_level] => Individual
            [product_name] => Member
            [start_date] => November 17, 2025
            [renewal_date] => November 17, 2026
            [days_remaining] => 366
            [is_active] => 1
            [status] => active
        )

)

[2025-11-17 11:36:38] [debug] âœ… One-time membership found - displaying it (hiding any WC subscriptions) Array
(
    [user_id] => 1958
    [membership_level] => Individual
    [days_remaining] => 366
    [wc_subscriptions_hidden] => 0
)

[2025-11-17 11:36:39] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:39] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:39] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:39] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:39] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:39] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:40] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:40] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:41] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:41] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:46] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:46] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:47] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:47] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:51] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:36:52] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:36:52] [debug] Membership cron jobs scheduled successfully
[2025-11-17 11:42:41] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:42:52] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:42:59] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:44:48] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:44:49] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:44:49] [debug] LGL WP Users: Starting LGL ID meta field migration Array
(
    [dry_run] => 1
)

[2025-11-17 11:44:50] [debug] LGL WP Users: Found users with legacy LGL ID fields Array
(
    [count] => 0
)

[2025-11-17 11:44:50] [debug] LGL WP Users: LGL ID migration completed Array
(
    [processed] => 0
    [migrated] => 0
    [skipped] => 0
    [errors] => Array
        (
        )

    [details] => Array
        (
        )

)

[2025-11-17 11:45:41] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:45:43] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:45:45] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:46:02] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-17 11:46:03] [debug] LGL WP Users: Starting LGL ID meta field migration Array
(
    [dry_run] => 1
)

[2025-11-17 11:46:03] [debug] LGL WP Users: Found users with legacy LGL ID fields Array
(
    [count] => 0
)

[2025-11-17 11:46:03] [debug] LGL WP Users: LGL ID migration completed Array
(
    [processed] => 0
    [migrated] => 0
    [skipped] => 0
    [errors] => Array
        (
        )

    [details] => Array
        (
        )

)


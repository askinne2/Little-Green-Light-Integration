[2025-11-18 06:52:33] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:34] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:34] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:35] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:36] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:37] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:44] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:45] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:45] [debug] LGL Relations Manager: User to order relation created 1967_90172
[2025-11-18 06:52:47] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-18 06:52:47] [debug] LGL Email Blocker: Evaluation - To: Linley@upstateinternational.org | Subject: [Upstate International] New customer order (90172) - November 18, 2025 | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-18 06:52:47] [debug] LGL Email Blocker: BLOCKED email - To: Linley@upstateinternational.org | Subject: [Upstate International] New customer order (90172) - November 18, 2025 | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-18 06:52:47] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-18 06:52:47] [debug] OrderEmailCustomizer: Rendered email template Array
(
    [template] => membership-confirmation.html
    [order_id] => 90172
    [product_id] => 89885
)

[2025-11-18 06:52:47] [debug] LGL Email Blocker: Evaluation - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order has been received! | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-18 06:52:47] [debug] LGL Email Blocker: BLOCKED email - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order has been received! | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-18 06:52:47] [debug] ðŸš€ OrderProcessor::processCompletedOrder() STARTED Array
(
    [order_id] => 90172
    [timestamp] => 2025-11-18 06:52:47
    [memory_usage] => 124MB
    [hook] => woocommerce_payment_complete
)

[2025-11-18 06:52:47] [debug] ðŸ“‹ OrderProcessor: Order Details Array
(
    [order_id] => 90172
    [order_status] => processing
    [order_total] => 155.25
    [customer_id] => 1967
    [customer_email] => andrew@hispanicalliancesc.com
    [payment_method] => stripe_cc
    [order_date] => 2025-11-18 06:52:45
    [item_count] => 1
)

[2025-11-18 06:52:47] [debug] ðŸ‘¤ OrderProcessor: Customer Info Array
(
    [user_id] => 1967
    [billing_email] => andrew@hispanicalliancesc.com
    [billing_first_name] => Andrew
    [billing_last_name] => Skinner
    [billing_phone] => 8653120285
)

[2025-11-18 06:52:47] [debug] âš¡ OrderProcessor: Processing immediate tasks...
[2025-11-18 06:52:47] [debug] âš¡ OrderProcessor::processImmediateTasks() STARTED Array
(
    [order_id] => 90172
    [user_id] => 1967
)

[2025-11-18 06:52:47] [debug] OrderProcessor: Payment method updated Array
(
    [user_id] => 1967
    [payment_method] => stripe_cc
    [stored_as] => online
)

[2025-11-18 06:52:47] [debug] âš¡ OrderProcessor::processOrderProductsImmediate() STARTED Array
(
    [total_products] => 1
    [user_id] => 1967
    [order_id] => 90172
    [mode] => immediate_only
)

[2025-11-18 06:52:47] [debug] ðŸ” OrderProcessor: Processing Product #1 (IMMEDIATE) Array
(
    [name] => Supporter
    [quantity] => 1
    [product_id] => 89885
    [parent_id] => 89885
    [categories] => Array
        (
            [0] => memberships
        )

)

[2025-11-18 06:52:47] [debug] ðŸŽ¯ OrderProcessor: Processing membership (IMMEDIATE) Array
(
    [product_name] => Supporter
)

[2025-11-18 06:52:47] [debug] ðŸŽ¯ OrderProcessor::processMembershipProductImmediate() STARTED Array
(
    [user_id] => 1967
    [order_id] => 90172
    [product_name] => Supporter
    [mode] => immediate_only
)

[2025-11-18 06:52:47] [debug] âš¡ MembershipOrderHandler::processOrderImmediate() STARTED Array
(
    [user_id] => 1967
    [order_id] => 90172
    [membership_level] => Supporter
    [mode] => immediate_only
)

[2025-11-18 06:52:47] [debug] ðŸ” MembershipOrderHandler: Determining membership level Array
(
    [wc_product_name] => Supporter
)

[2025-11-18 06:52:47] [debug] ðŸ” Found LGL sync ID on variation Array
(
    [variation_id] => 89885
    [fund_id] => 427
    [source] => unified
)

[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() called
[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings: settingsHandler is SET
[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() called, raw result: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

    [7] => Array
        (
            [level_name] => Member
            [level_slug] => member
            [lgl_membership_level_id] => 422
        )

    [8] => Array
        (
            [level_name] =>  Supporter
            [level_slug] => supporter
            [lgl_membership_level_id] => 427
        )

    [9] => Array
        (
            [level_name] =>  Patron
            [level_slug] => patron
            [lgl_membership_level_id] => 432
        )

)

[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() returning: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

    [7] => Array
        (
            [level_name] => Member
            [level_slug] => member
            [lgl_membership_level_id] => 422
        )

    [8] => Array
        (
            [level_name] =>  Supporter
            [level_slug] => supporter
            [lgl_membership_level_id] => 427
        )

    [9] => Array
        (
            [level_name] =>  Patron
            [level_slug] => patron
            [lgl_membership_level_id] => 432
        )

)

[2025-11-18 06:52:47] [debug] âœ… MembershipOrderHandler: Using JetEngine membership mapping Array
(
    [membership_level_id] => 427
    [membership_name] =>  Supporter
)

[2025-11-18 06:52:47] [debug] ðŸ‘¤ Helper: Changing user role Array
(
    [user_id] => 1967
    [old_role] => customer
    [new_role] => ui_member
)

[2025-11-18 06:52:47] [debug] âœ… Helper: User role changed successfully Array
(
    [user_id] => 1967
    [from] => customer
    [to] => ui_member
    [current_roles] => Array
        (
            [0] => ui_member
        )

)

[2025-11-18 06:52:47] [debug] MembershipOrderHandler: Updated user role to ui_member (individual) 1967
[2025-11-18 06:52:47] [debug] ðŸ”„ Helper: Converting WC name to LGL name Array
(
    [input] =>  Supporter
)

[2025-11-18 06:52:47] [debug] âš ï¸ Helper: No name mapping found, returning original Array
(
    [wc_name] =>  Supporter
)

[2025-11-18 06:52:47] [debug] UPDATING USER META FOR:  1967
[2025-11-18 06:52:47] [debug] MembershipOrderHandler: User data updated (WordPress only, LGL sync happens separately) 1967
[2025-11-18 06:52:47] [debug] OrderEmailCustomizer: Running email customizer
[2025-11-18 06:52:47] [debug] OrderEmailCustomizer: Rendered email template Array
(
    [template] => membership-confirmation.html
    [order_id] => 90172
    [product_id] => 89885
)

[2025-11-18 06:52:47] [debug] LGL Email Blocker: Evaluation - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order is now complete | Detected Type: woocommerce | Level: all | Should Block: YES
[2025-11-18 06:52:47] [debug] LGL Email Blocker: BLOCKED email - To: andrew@hispanicalliancesc.com | Subject: Your Upstate International order is now complete | Type: woocommerce | Level: all | Environment: ui-hybrid.local (DEBUG_OFF) | Mode: manual_override
[2025-11-18 06:52:47] [debug] Set one-time renewal date for user 1967 Array
(
    [membership_level] =>  Supporter
    [renewal_date] => 2026-11-18
    [start_date] => 2025-11-18
)

[2025-11-18 06:52:47] [debug] âœ… MembershipOrderHandler::processOrderImmediate() COMPLETED Array
(
    [order_id] => 90172
    [user_id] => 1967
    [final_membership_level] =>  Supporter
)

[2025-11-18 06:52:47] [debug] âœ… OrderProcessor: MembershipOrderHandler (immediate) completed
[2025-11-18 06:52:47] [debug] âœ… OrderProcessor::processOrderProductsImmediate() COMPLETED Array
(
    [products_processed] => 1
    [events_processed] => 0
    [attendees_created] => 0
)

[2025-11-18 06:52:47] [debug] âœ… OrderProcessor::processImmediateTasks() COMPLETED Array
(
    [order_id] => 90172
)

[2025-11-18 06:52:47] [debug] â° OrderProcessor: Scheduling async LGL sync...
[2025-11-18 06:52:47] [debug] â° AsyncOrderProcessor: Scheduling async processing (WP Cron) Array
(
    [order_id] => 90172
)

[2025-11-18 06:52:47] [debug] âœ… AsyncOrderProcessor: WP Cron event scheduled Array
(
    [order_id] => 90172
    [hook] => lgl_process_order_async
    [scheduled_for] => 2025-11-18 11:52:47
)

[2025-11-18 06:52:47] [debug] ðŸš€ AsyncOrderProcessor: Triggered cron spawn for immediate execution Array
(
    [order_id] => 90172
)

[2025-11-18 06:52:47] [debug] âœ… OrderProcessor::processCompletedOrder() COMPLETED Array
(
    [order_id] => 90172
    [final_memory_usage] => 124MB
    [async_scheduled] => 1
)

[2025-11-18 06:52:47] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:47] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:47] [debug] ðŸ”„ AsyncOrderProcessor: Processing order async (WP Cron) Array
(
    [order_id] => 90172
    [timestamp] => 2025-11-18 06:52:47
    [cron_hook] => lgl_process_order_async
)

[2025-11-18 06:52:47] [debug] ðŸ”„ OrderProcessor::processLglSyncOnly() STARTED Array
(
    [order_id] => 90172
    [timestamp] => 2025-11-18 06:52:47
)

[2025-11-18 06:52:47] [debug] ðŸ”„ OrderProcessor::processOrderProductsLglSync() STARTED Array
(
    [total_products] => 1
    [user_id] => 1967
    [order_id] => 90172
    [mode] => lgl_sync_only
)

[2025-11-18 06:52:47] [debug] ðŸŽ¯ OrderProcessor: Processing membership (LGL SYNC) Array
(
    [product_name] => Supporter
)

[2025-11-18 06:52:47] [debug] ðŸŽ¯ OrderProcessor::processMembershipProductLglSync() STARTED Array
(
    [user_id] => 1967
    [order_id] => 90172
    [product_name] => Supporter
    [mode] => lgl_sync_only
)

[2025-11-18 06:52:47] [debug] ðŸ”„ MembershipOrderHandler::processOrderLglSync() STARTED Array
(
    [user_id] => 1967
    [order_id] => 90172
    [membership_level] => Supporter
    [mode] => lgl_sync_only
)

[2025-11-18 06:52:47] [debug] ðŸ” MembershipOrderHandler: Determining membership level Array
(
    [wc_product_name] => Supporter
)

[2025-11-18 06:52:47] [debug] ðŸ” Found LGL sync ID on variation Array
(
    [variation_id] => 89885
    [fund_id] => 427
    [source] => unified
)

[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() called
[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings: settingsHandler is SET
[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() called, raw result: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

    [7] => Array
        (
            [level_name] => Member
            [level_slug] => member
            [lgl_membership_level_id] => 422
        )

    [8] => Array
        (
            [level_name] =>  Supporter
            [level_slug] => supporter
            [lgl_membership_level_id] => 427
        )

    [9] => Array
        (
            [level_name] =>  Patron
            [level_slug] => patron
            [lgl_membership_level_id] => 432
        )

)

[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() returning: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

    [7] => Array
        (
            [level_name] => Member
            [level_slug] => member
            [lgl_membership_level_id] => 422
        )

    [8] => Array
        (
            [level_name] =>  Supporter
            [level_slug] => supporter
            [lgl_membership_level_id] => 427
        )

    [9] => Array
        (
            [level_name] =>  Patron
            [level_slug] => patron
            [lgl_membership_level_id] => 432
        )

)

[2025-11-18 06:52:47] [debug] âœ… MembershipOrderHandler: Using JetEngine membership mapping Array
(
    [membership_level_id] => 427
    [membership_name] =>  Supporter
)

[2025-11-18 06:52:47] [debug] ðŸ”„ Helper: Converting WC name to LGL name Array
(
    [input] =>  Supporter
)

[2025-11-18 06:52:47] [debug] âš ï¸ Helper: No name mapping found, returning original Array
(
    [wc_name] =>  Supporter
)

[2025-11-18 06:52:47] [debug] ðŸ”— MembershipOrderHandler::registerUserInLGL() STARTED Array
(
    [user_id] => 1967
    [user_email] => andrew@hispanicalliancesc.com
    [membership_type] =>  Supporter
    [order_id] => 90172
    [membership_level_id] => 427
)

[2025-11-18 06:52:47] [debug] ðŸ§­ MembershipRegistrationService::register() STARTED Array
(
    [user_id] => 1967
    [search_name] => Andrew%20Skinner
    [email] => andrew@hispanicalliancesc.com
    [order_id] => 90172
    [membership_level] =>  Supporter
    [membership_level_id] => 427
)

[2025-11-18 06:52:47] [debug] ðŸ” MembershipRegistrationService: Found LGL ID in user meta Array
(
    [user_id] => 1967
    [lgl_id] => 947172
    [meta_key] => lgl_constituent_id or lgl_id
)

[2025-11-18 06:52:47] [debug] LGL Connection: Cache HIT for constituents/947172
[2025-11-18 06:52:47] [debug] âœ… MembershipRegistrationService: LGL ID verified in LGL Array
(
    [lgl_id] => 947172
    [constituent_name] => Andrew Skinner
)

[2025-11-18 06:52:47] [debug] ðŸ”„ MembershipRegistrationService: Existing constituent found, updating Array
(
    [user_id] => 1967
    [lgl_id] => 947172
    [match_method] => user_meta
)

[2025-11-18 06:52:47] [debug] LGL Constituents: Name set Array
(
    [first_name] => Andrew
    [last_name] => Skinner
)

[2025-11-18 06:52:47] [debug] LGL Constituents: Email set andrew@hispanicalliancesc.com
[2025-11-18 06:52:47] [debug] LGL Constituents: ðŸ” setAddress: Checking user meta Array
(
    [user_id] => 1967
    [street1] => 57 Blake Street
    [city] => Greenville
    [has_street1] => 1
    [has_city] => 1
)

[2025-11-18 06:52:47] [debug] LGL Constituents: âœ… Address set and added to array Array
(
    [street] => 57 Blake Street
    [city] => Greenville
    [address_data_count] => 1
    [address_entry] => Array
        (
            [street] => 57 Blake Street
            [street_address_type_id] => 1
            [street_type_name] => Home
            [city] => Greenville
            [state] => SC
            [postal_code] => 29605
            [county] => 
            [country] => US
            [seasonal_from] => 01-01
            [seasonal_to] => 12-31
            [seasonal] => 
            [is_preferred] => 1
            [not_current] => 
        )

)

[2025-11-18 06:52:47] [debug] LGL Constituents: ðŸŽ¯ setMembership() CALLED! Array
(
    [user_id] => 1967
)

[2025-11-18 06:52:47] [debug] LGL Constituents: ðŸ” Looking up membership level config Array
(
    [membership_type] =>  Supporter
    [user_id] => 1967
)

[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() called
[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings: settingsHandler is SET
[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() called, raw result: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

    [7] => Array
        (
            [level_name] => Member
            [level_slug] => member
            [lgl_membership_level_id] => 422
        )

    [8] => Array
        (
            [level_name] =>  Supporter
            [level_slug] => supporter
            [lgl_membership_level_id] => 427
        )

    [9] => Array
        (
            [level_name] =>  Patron
            [level_slug] => patron
            [lgl_membership_level_id] => 432
        )

)

[2025-11-18 06:52:47] [debug] ðŸ” ApiSettings::getMembershipLevels() returning: Array
(
    [0] => Array
        (
            [level_name] => General
            [level_slug] => general
            [lgl_membership_level_id] => 387
        )

    [1] => Array
        (
            [level_name] => Friend
            [level_slug] => friend
            [lgl_membership_level_id] => 392
        )

    [2] => Array
        (
            [level_name] => Patron Indiv
            [level_slug] => patron-indiv
            [lgl_membership_level_id] => 397
        )

    [3] => Array
        (
            [level_name] => Patron Family
            [level_slug] => patron-family
            [lgl_membership_level_id] => 402
        )

    [4] => Array
        (
            [level_name] => Family
            [level_slug] => family
            [lgl_membership_level_id] => 407
        )

    [5] => Array
        (
            [level_name] => Individual
            [level_slug] => individual
            [lgl_membership_level_id] => 412
        )

    [6] => Array
        (
            [level_name] => Daily Plan
            [level_slug] => daily-plan
            [lgl_membership_level_id] => 417
        )

    [7] => Array
        (
            [level_name] => Member
            [level_slug] => member
            [lgl_membership_level_id] => 422
        )

    [8] => Array
        (
            [level_name] =>  Supporter
            [level_slug] => supporter
            [lgl_membership_level_id] => 427
        )

    [9] => Array
        (
            [level_name] =>  Patron
            [level_slug] => patron
            [lgl_membership_level_id] => 432
        )

)

[2025-11-18 06:52:47] [debug] LGL Constituents: ðŸ” Membership level config from user meta Array
(
    [membership_level_id] => 427
    [found] => YES
)

[2025-11-18 06:52:47] [debug] LGL Constituents: ðŸ“‹ Final level config Array
(
    [level_name] =>  Supporter
    [level_slug] => supporter
    [lgl_membership_level_id] => 427
)

[2025-11-18 06:52:47] [debug] LGL Constituents: Modern Membership Data Created Array
(
    [user_id] => 1967
    [membership_type] =>  Supporter
    [level_config] => Array
        (
            [level_name] =>  Supporter
            [level_slug] => supporter
            [lgl_membership_level_id] => 427
        )

    [membership_data] => Array
        (
            [membership_level_id] => 427
            [membership_level_name] =>  Supporter
            [date_start] => 2025-11-18
            [finish_date] => 2026-11-18
            [note] => Membership created via Modern LGL API on 2025-11-18
        )

)

[2025-11-18 06:52:47] [debug] LGL Constituents: Final Membership Data Set Array
(
    [membership_level_id] => 427
    [membership_level_name] =>  Supporter
    [date_start] => 2025-11-18
    [finish_date] => 2026-11-18
    [note] => Membership created via Modern LGL API on 2025-11-18
)

[2025-11-18 06:52:47] [debug] LGL Constituents: All data set for user 1967
[2025-11-18 06:52:47] [debug] LGL Constituents: Name set Array
(
    [first_name] => Andrew
    [last_name] => Skinner
    [is_org] => 
    [constituent_contact_type_id] => 1247
    [constituent_contact_type_name] => Primary
    [addressee] => Andrew Skinner
    [salutation] => Andrew
    [sort_name] => Skinner, Andrew
    [is_deceased] => 
    [annual_report_name] => Andrew Skinner
    [date_added] => 2025-11-18
    [is_anon] => 
)

[2025-11-18 06:52:47] [debug] LGL Constituents: Email already set, skipping duplicate andrew@hispanicalliancesc.com
[2025-11-18 06:52:47] [debug] LGL Constituents: Phone set 8653120285
[2025-11-18 06:52:47] [debug] ðŸ”§ buildUpdateData: Including email addresses Array
(
    [count] => 1
    [emails] => Array
        (
            [0] => andrew@hispanicalliancesc.com
        )

)

[2025-11-18 06:52:47] [debug] ðŸ”§ buildUpdateData: Including phone numbers Array
(
    [count] => 1
    [phones] => Array
        (
            [0] => 8653120285
        )

)

[2025-11-18 06:52:47] [debug] ðŸ”§ buildUpdateData: Including street addresses Array
(
    [count] => 1
    [addresses] => Array
        (
            [0] => 57 Blake Street
        )

)

[2025-11-18 06:52:47] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:48] [debug] Rate Limiter: Request recorded. Total in window: 1
[2025-11-18 06:52:48] [debug] LGL Constituents: Constituent updated successfully Array
(
    [success] => 1
    [http_code] => 200
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 947172
            [external_constituent_id] => 
            [is_org] => 
            [constituent_contact_type_id] => 1247
            [constituent_contact_type_name] => Primary
            [prefix] => 
            [first_name] => Andrew
            [middle_name] => 
            [last_name] => Skinner
            [suffix] => 
            [spouse_name] => 
            [org_name] => 
            [job_title] => 
            [addressee] => Andrew Skinner
            [salutation] => Andrew
            [sort_name] => Skinner, Andrew
            [constituent_interest_level_id] => 
            [constituent_interest_level_name] => 
            [constituent_rating_id] => 
            [constituent_rating_name] => 
            [is_deceased] => 
            [deceased_date] => 
            [annual_report_name] => Andrew Skinner
            [birthday] => 
            [gender] => 
            [maiden_name] => 
            [nick_name] => 
            [spouse_nick_name] => 
            [date_added] => 2025-11-18
            [alt_salutation] => Andrew
            [alt_addressee] => Andrew Skinner
            [honorary_name] => Andrew Skinner
            [assistant_name] => 
            [marital_status_id] => 
            [marital_status_name] => 
            [is_anon] => 
            [created_at] => 2025-11-18T11:45:52Z
            [updated_at] => 2025-11-18T11:52:48Z
            [class_affiliations] => Array
                (
                )

            [relationships] => Array
                (
                )

            [street_addresses] => Array
                (
                    [0] => Array
                        (
                            [id] => 840432
                            [street] => 57 Blake Street
                            [city] => Greenville
                            [state] => SC
                            [country] => US
                            [postal_code] => 29605
                            [county] => 
                            [street_address_type_id] => 1
                            [street_type_name] => Home
                            [is_preferred] => 1
                            [not_current] => 
                            [parent_id] => 
                            [seasonal_from] => 01-01
                            [seasonal_to] => 12-31
                            [seasonal] => 
                            [lat] => 
                            [lng] => 
                            [zip5] => 29605
                            [verified] => 
                            [verified_on] => 
                            [created_at] => 2025-11-18T11:45:56Z
                            [updated_at] => 2025-11-18T11:45:56Z
                        )

                )

            [phone_numbers] => Array
                (
                    [0] => Array
                        (
                            [id] => 482077
                            [number] => 8653120285
                            [phone_number_type_id] => 1
                            [phone_type_name] => Home
                            [is_preferred] => 1
                            [not_current] => 
                            [parent_id] => 
                            [normalized_number] => 8653120285
                            [created_at] => 2025-11-18T11:46:42Z
                            [updated_at] => 2025-11-18T11:46:42Z
                        )

                    [1] => Array
                        (
                            [id] => 482072
                            [number] => 
                            [phone_number_type_id] => 1
                            [phone_type_name] => Home
                            [is_preferred] => 
                            [not_current] => 
                            [parent_id] => 
                            [normalized_number] => 
                            [created_at] => 2025-11-18T11:45:54Z
                            [updated_at] => 2025-11-18T11:50:25Z
                        )

                )

            [email_addresses] => Array
                (
                    [0] => Array
                        (
                            [id] => 279207
                            [address] => andrew@hispanicalliancesc.com
                            [email_address_type_id] => 1
                            [email_type_name] => Home
                            [is_preferred] => 1
                            [not_current] => 
                            [parent_id] => 
                            [created_at] => 2025-11-18T11:45:53Z
                            [updated_at] => 2025-11-18T11:50:06Z
                        )

                    [1] => Array
                        (
                            [id] => 279212
                            [address] => 
                            [email_address_type_id] => 1
                            [email_type_name] => Home
                            [is_preferred] => 
                            [not_current] => 
                            [parent_id] => 
                            [created_at] => 2025-11-18T11:46:41Z
                            [updated_at] => 2025-11-18T11:50:19Z
                        )

                )

            [web_addresses] => Array
                (
                )

            [categories] => Array
                (
                    [0] => Array
                        (
                            [id] => 1287
                            [item_type] => Constituent
                            [name] => Giving Status
                            [key] => giving_status
                            [facet_type] => list
                            [ordinal] => 100
                            [removable] => 
                            [editable] => 
                            [display_format] => compact
                            [keywords] => Array
                                (
                                    [0] => Array
                                        (
                                            [id] => 12797
                                            [category_id] => 1287
                                            [name] => Non Donor
                                            [description] => 
                                            [short_code] => non_donor
                                            [ordinal] => 4
                                            [removable] => 
                                            [can_change] => 1
                                            [can_select] => 1
                                            [created_at] => 2023-02-25T00:56:33Z
                                            [updated_at] => 2023-02-25T00:56:33Z
                                        )

                                )

                        )

                )

            [groups] => Array
                (
                )

            [memberships] => Array
                (
                    [0] => Array
                        (
                            [id] => 4117
                            [constituent_id] => 947172
                            [membership_level_id] => 427
                            [membership_level_name] =>  Supporter
                            [date_start] => 2025-11-18
                            [finish_date] => 2026-11-18
                            [note] => Membership created via Modern LGL API on 2025-11-18
                            [created_at] => 2025-11-18T11:46:46Z
                            [updated_at] => 2025-11-18T11:46:52Z
                        )

                    [1] => Array
                        (
                            [id] => 4112
                            [constituent_id] => 947172
                            [membership_level_id] => 427
                            [membership_level_name] =>  Supporter
                            [date_start] => 2025-11-18
                            [finish_date] => 2025-11-18
                            [note] => Membership ended via WooCommerce renewal on 2025-11-18
                            [created_at] => 2025-11-18T11:45:58Z
                            [updated_at] => 2025-11-18T11:46:52Z
                        )

                )

            [custom_attrs] => Array
                (
                )

        )

    [raw_response] => {"api_version":"1.0","id":947172,"external_constituent_id":null,"is_org":false,"constituent_contact_type_id":1247,"constituent_contact_type_name":"Primary","prefix":null,"first_name":"Andrew","middle_name":null,"last_name":"Skinner","suffix":null,"spouse_name":null,"org_name":null,"job_title":null,"addressee":"Andrew Skinner","salutation":"Andrew","sort_name":"Skinner, Andrew","constituent_interest_level_id":null,"constituent_interest_level_name":null,"constituent_rating_id":null,"constituent_rating_name":null,"is_deceased":false,"deceased_date":null,"annual_report_name":"Andrew Skinner","birthday":null,"gender":null,"maiden_name":null,"nick_name":null,"spouse_nick_name":null,"date_added":"2025-11-18","alt_salutation":"Andrew","alt_addressee":"Andrew Skinner","honorary_name":"Andrew Skinner","assistant_name":null,"marital_status_id":null,"marital_status_name":null,"is_anon":false,"created_at":"2025-11-18T11:45:52Z","updated_at":"2025-11-18T11:52:48Z","class_affiliations":[],"relationships":[],"street_addresses":[{"id":840432,"street":"57 Blake Street","city":"Greenville","state":"SC","country":"US","postal_code":"29605","county":"","street_address_type_id":1,"street_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"seasonal_from":"01-01","seasonal_to":"12-31","seasonal":false,"lat":null,"lng":null,"zip5":"29605","verified":false,"verified_on":null,"created_at":"2025-11-18T11:45:56Z","updated_at":"2025-11-18T11:45:56Z"}],"phone_numbers":[{"id":482077,"number":"8653120285","phone_number_type_id":1,"phone_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"normalized_number":"8653120285","created_at":"2025-11-18T11:46:42Z","updated_at":"2025-11-18T11:46:42Z"},{"id":482072,"number":"","phone_number_type_id":1,"phone_type_name":"Home","is_preferred":false,"not_current":false,"parent_id":null,"normalized_number":"","created_at":"2025-11-18T11:45:54Z","updated_at":"2025-11-18T11:50:25Z"}],"email_addresses":[{"id":279207,"address":"andrew@hispanicalliancesc.com","email_address_type_id":1,"email_type_name":"Home","is_preferred":true,"not_current":false,"parent_id":null,"created_at":"2025-11-18T11:45:53Z","updated_at":"2025-11-18T11:50:06Z"},{"id":279212,"address":"","email_address_type_id":1,"email_type_name":"Home","is_preferred":false,"not_current":false,"parent_id":null,"created_at":"2025-11-18T11:46:41Z","updated_at":"2025-11-18T11:50:19Z"}],"web_addresses":[],"categories":[{"id":1287,"item_type":"Constituent","name":"Giving Status","key":"giving_status","facet_type":"list","ordinal":100,"removable":false,"editable":false,"display_format":"compact","keywords":[{"id":12797,"category_id":1287,"name":"Non Donor","description":null,"short_code":"non_donor","ordinal":4,"removable":false,"can_change":true,"can_select":true,"created_at":"2023-02-25T00:56:33Z","updated_at":"2023-02-25T00:56:33Z"}]}],"groups":[],"memberships":[{"id":4117,"constituent_id":947172,"membership_level_id":427,"membership_level_name":" Supporter","date_start":"2025-11-18","finish_date":"2026-11-18","note":"Membership created via Modern LGL API on 2025-11-18","created_at":"2025-11-18T11:46:46Z","updated_at":"2025-11-18T11:46:52Z"},{"id":4112,"constituent_id":947172,"membership_level_id":427,"membership_level_name":" Supporter","date_start":"2025-11-18","finish_date":"2025-11-18","note":"Membership ended via WooCommerce renewal on 2025-11-18","created_at":"2025-11-18T11:45:58Z","updated_at":"2025-11-18T11:46:52Z"}],"custom_attrs":[]}
)

[2025-11-18 06:52:48] [debug] ðŸ”„ updateOrAddEmailAddress: Checking existing emails Array
(
    [lgl_id] => 947172
    [email] => andrew@hispanicalliancesc.com
)

[2025-11-18 06:52:48] [debug] Rate Limiter: Waiting 641.7939453125ms before next request
[2025-11-18 06:52:49] [debug] Rate Limiter: Request recorded. Total in window: 2
[2025-11-18 06:52:49] [debug] ðŸ” getConstituentEmails: Raw response format Array
(
    [lgl_id] => 947172
    [data_type] => array
    [is_array] => 1
    [has_items] => 1
    [first_item_has_address] => 
    [data_keys] => Array
        (
            [0] => api_version
            [1] => items_count
            [2] => total_items
            [3] => limit
            [4] => offset
            [5] => item_type
            [6] => items
        )

)

[2025-11-18 06:52:49] [debug] ðŸ” getConstituentEmails: Items array format Array
(
    [count] => 2
)

[2025-11-18 06:52:49] [debug] âœ… updateOrAddEmailAddress: Email unchanged, skipping Array
(
    [email] => andrew@hispanicalliancesc.com
)

[2025-11-18 06:52:49] [debug] âœ… syncContactInfo: Email unchanged Array
(
    [lgl_id] => 947172
    [email] => andrew@hispanicalliancesc.com
)

[2025-11-18 06:52:49] [debug] ðŸ”„ updateOrAddPhoneNumber: Checking existing phones Array
(
    [lgl_id] => 947172
    [phone] => 8653120285
)

[2025-11-18 06:52:49] [debug] Rate Limiter: Waiting 575.58081054688ms before next request
[2025-11-18 06:52:50] [debug] Rate Limiter: Request recorded. Total in window: 3
[2025-11-18 06:52:50] [debug] ðŸ” getConstituentPhones: Items array format Array
(
    [count] => 2
)

[2025-11-18 06:52:50] [debug] âœ… updateOrAddPhoneNumber: Phone unchanged, skipping Array
(
    [phone] => 8653120285
)

[2025-11-18 06:52:50] [debug] âœ… syncContactInfo: Phone unchanged Array
(
    [lgl_id] => 947172
    [phone] => 8653120285
)

[2025-11-18 06:52:50] [debug] LGL Constituents: ðŸ” getAddressData: Returning address data Array
(
    [count] => 1
    [data] => Array
        (
            [0] => Array
                (
                    [street] => 57 Blake Street
                    [street_address_type_id] => 1
                    [street_type_name] => Home
                    [city] => Greenville
                    [state] => SC
                    [postal_code] => 29605
                    [county] => 
                    [country] => US
                    [seasonal_from] => 01-01
                    [seasonal_to] => 12-31
                    [seasonal] => 
                    [is_preferred] => 1
                    [not_current] => 
                )

        )

)

[2025-11-18 06:52:50] [debug] ðŸ”„ updateOrAddStreetAddress: Checking existing addresses Array
(
    [lgl_id] => 947172
    [street] => 57 Blake Street
    [city] => Greenville
)

[2025-11-18 06:52:50] [debug] Rate Limiter: Waiting 561.34716796875ms before next request
[2025-11-18 06:52:51] [debug] Rate Limiter: Request recorded. Total in window: 4
[2025-11-18 06:52:51] [debug] ðŸ” getConstituentAddresses: Items array format Array
(
    [count] => 1
)

[2025-11-18 06:52:51] [debug] âœ… updateOrAddStreetAddress: Address unchanged, skipping Array
(
    [street] => 57 Blake Street
)

[2025-11-18 06:52:51] [debug] âœ… syncContactInfo: Address unchanged Array
(
    [lgl_id] => 947172
    [street] => 57 Blake Street
)

[2025-11-18 06:52:51] [debug] LGL Cache: DELETED key constituent_947172
[2025-11-18 06:52:51] [debug] LGL Cache: SET key constituent_947172 (TTL: 3600s)
[2025-11-18 06:52:51] [debug] Rate Limiter: Waiting 585.21411132812ms before next request
[2025-11-18 06:52:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:51] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:52] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:52] [debug] ðŸ” SubscriptionRenewalManager: displayManualRenewalStatus() called Array
(
    [user_id] => 1967
    [show_all] => no
)

[2025-11-18 06:52:52] [debug] ðŸ“Š WC Subscriptions check Array
(
    [user_id] => 1967
    [subscription_count] => 0
    [has_subscriptions] => 
)

[2025-11-18 06:52:52] [debug] ðŸ” Checking for one-time membership (priority check) Array
(
    [user_id] => 1967
)

[2025-11-18 06:52:52] [debug] ðŸ” Getting one-time membership status Array
(
    [user_id] => 1967
)

[2025-11-18 06:52:52] [debug] ðŸ“Š User meta values Array
(
    [user_id] => 1967
    [subscription_status] => one-time
    [renewal_timestamp] => 1795002767
    [start_timestamp] => 1763448767
    [membership_level] =>  Supporter
    [renewal_date_formatted] => 2026-11-18 11:52:47
    [start_date_formatted] => 2025-11-18 06:52:47
)

[2025-11-18 06:52:52] [debug] â° Membership expiration check Array
(
    [user_id] => 1967
    [now] => 2025-11-18 06:52:52
    [renewal_date] => 2026-11-18 11:52:47
    [is_active] => 1
    [seconds_remaining] => 31553995
)

[2025-11-18 06:52:52] [debug] ðŸ“… Days remaining calculated Array
(
    [user_id] => 1967
    [days_remaining] => 366
)

[2025-11-18 06:52:52] [debug] ðŸ” Getting last membership product name Array
(
    [user_id] => 1967
)

[2025-11-18 06:52:52] [debug] ðŸ“¦ Orders found Array
(
    [user_id] => 1967
    [order_count] => 78
)

[2025-11-18 06:52:52] [debug] ðŸ” Checking order Array
(
    [order_id] => 90172
    [order_date] => 2025-11-18 06:52:45
)

[2025-11-18 06:52:52] [debug] ðŸ·ï¸ Checking product Array
(
    [product_id] => 89885
    [product_name] => Supporter
    [has_membership_category] => 1
)

[2025-11-18 06:52:52] [debug] âœ… Found membership product Array
(
    [product_name] => Supporter
    [order_id] => 90172
)

[2025-11-18 06:52:52] [debug] ðŸŽ« Product name retrieved Array
(
    [user_id] => 1967
    [product_name] => Supporter
)

[2025-11-18 06:52:52] [debug] âœ… One-time membership status compiled Array
(
    [user_id] => 1967
    [status_data] => Array
        (
            [user_id] => 1967
            [membership_level] =>  Supporter
            [product_name] => Supporter
            [start_date] => November 18, 2025
            [renewal_date] => November 18, 2026
            [days_remaining] => 366
            [is_active] => 1
            [status] => active
        )

)

[2025-11-18 06:52:52] [debug] ðŸ“‹ One-time membership status result Array
(
    [user_id] => 1967
    [status_found] => 1
    [status_data] => Array
        (
            [user_id] => 1967
            [membership_level] =>  Supporter
            [product_name] => Supporter
            [start_date] => November 18, 2025
            [renewal_date] => November 18, 2026
            [days_remaining] => 366
            [is_active] => 1
            [status] => active
        )

)

[2025-11-18 06:52:52] [debug] âœ… One-time membership found - displaying it (hiding any WC subscriptions) Array
(
    [user_id] => 1967
    [membership_level] =>  Supporter
    [days_remaining] => 366
    [wc_subscriptions_hidden] => 0
)

[2025-11-18 06:52:52] [debug] Rate Limiter: Request recorded. Total in window: 5
[2025-11-18 06:52:52] [debug] âœ… MembershipRegistrationService: Constituent updated (Step 1/5) Array
(
    [lgl_id] => 947172
    [http_code] => 200
    [skip_membership] => 
)

[2025-11-18 06:52:52] [debug] â„¹ï¸ MembershipRegistrationService: Skipping email/phone (already handled by syncContactInfo()) Array
(
    [lgl_id] => 947172
)

[2025-11-18 06:52:52] [debug] â„¹ï¸ MembershipRegistrationService: Skipping address (already handled by syncContactInfo()) Array
(
    [lgl_id] => 947172
)

[2025-11-18 06:52:52] [debug] ðŸ” Connection::getMemberships() Array
(
    [endpoint] => constituents/947172/memberships
    [lgl_id] => 947172
)

[2025-11-18 06:52:52] [debug] Rate Limiter: Waiting 455.63598632812ms before next request
[2025-11-18 06:52:52] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:53] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:53] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:52:53] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:52:53] [debug] Rate Limiter: Request recorded. Total in window: 6
[2025-11-18 06:52:53] [debug] ðŸ“¥ Memberships Response Array
(
    [success] => 1
    [count] => 2
)

[2025-11-18 06:52:53] [debug] ðŸ”„ Deactivating old active memberships Array
(
    [lgl_id] => 947172
    [active_count] => 2
    [total_count] => 2
)

[2025-11-18 06:52:53] [debug] ðŸ”„ Connection::updateMembership() - Using direct endpoint Array
(
    [endpoint] => memberships/4112
    [membership_id] => 4112
    [membership_data] => Array
        (
            [id] => 4112
            [membership_level_id] => 427
            [membership_level_name] =>  Supporter
            [date_start] => 2025-11-18
            [finish_date] => 2025-11-18
            [note] => Membership ended via WooCommerce renewal on 2025-11-18
        )

)

[2025-11-18 06:52:53] [debug] Rate Limiter: Waiting 573.61596679688ms before next request
[2025-11-18 06:52:54] [debug] Rate Limiter: Request recorded. Total in window: 7
[2025-11-18 06:52:54] [debug] ðŸ“¥ Membership Update Response Array
(
    [success] => 1
    [http_code] => 200
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 4112
            [constituent_id] => 947172
            [membership_level_id] => 427
            [membership_level_name] =>  Supporter
            [date_start] => 2025-11-18
            [finish_date] => 2025-11-18
            [note] => Membership ended via WooCommerce renewal on 2025-11-18
            [created_at] => 2025-11-18T11:45:58Z
            [updated_at] => 2025-11-18T11:52:54Z
        )

    [raw_response] => {"api_version":"1.0","id":4112,"constituent_id":947172,"membership_level_id":427,"membership_level_name":" Supporter","date_start":"2025-11-18","finish_date":"2025-11-18","note":"Membership ended via WooCommerce renewal on 2025-11-18","created_at":"2025-11-18T11:45:58Z","updated_at":"2025-11-18T11:52:54Z"}
)

[2025-11-18 06:52:54] [debug] âœ… Membership updated successfully Array
(
    [membership_id] => 4112
)

[2025-11-18 06:52:54] [debug] âœ… Deactivated membership Array
(
    [membership_id] => 4112
)

[2025-11-18 06:52:54] [debug] ðŸ”„ Connection::updateMembership() - Using direct endpoint Array
(
    [endpoint] => memberships/4117
    [membership_id] => 4117
    [membership_data] => Array
        (
            [id] => 4117
            [membership_level_id] => 427
            [membership_level_name] =>  Supporter
            [date_start] => 2025-11-18
            [finish_date] => 2025-11-18
            [note] => Membership ended via WooCommerce renewal on 2025-11-18
        )

)

[2025-11-18 06:52:54] [debug] Rate Limiter: Waiting 561.44189453125ms before next request
[2025-11-18 06:52:55] [debug] Rate Limiter: Request recorded. Total in window: 8
[2025-11-18 06:52:55] [debug] ðŸ“¥ Membership Update Response Array
(
    [success] => 1
    [http_code] => 200
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 4117
            [constituent_id] => 947172
            [membership_level_id] => 427
            [membership_level_name] =>  Supporter
            [date_start] => 2025-11-18
            [finish_date] => 2025-11-18
            [note] => Membership ended via WooCommerce renewal on 2025-11-18
            [created_at] => 2025-11-18T11:46:46Z
            [updated_at] => 2025-11-18T11:52:55Z
        )

    [raw_response] => {"api_version":"1.0","id":4117,"constituent_id":947172,"membership_level_id":427,"membership_level_name":" Supporter","date_start":"2025-11-18","finish_date":"2025-11-18","note":"Membership ended via WooCommerce renewal on 2025-11-18","created_at":"2025-11-18T11:46:46Z","updated_at":"2025-11-18T11:52:55Z"}
)

[2025-11-18 06:52:55] [debug] âœ… Membership updated successfully Array
(
    [membership_id] => 4117
)

[2025-11-18 06:52:55] [debug] âœ… Deactivated membership Array
(
    [membership_id] => 4117
)

[2025-11-18 06:52:55] [debug] LGL Membership Payload Array
(
    [endpoint] => constituents/947172/memberships
    [payload] => Array
        (
            [membership_level_id] => 427
            [membership_level_name] =>  Supporter
            [date_start] => 2025-11-18
            [finish_date] => 2026-11-18
            [note] => Membership created via Modern LGL API on 2025-11-18
        )

)

[2025-11-18 06:52:55] [debug] Rate Limiter: Waiting 500.3330078125ms before next request
[2025-11-18 06:52:56] [debug] ðŸ” RAW JSON PAYLOAD: {"membership_level_id":427,"membership_level_name":" Supporter","date_start":"2025-11-18","finish_date":"2026-11-18","note":"Membership created via Modern LGL API on 2025-11-18"}
[2025-11-18 06:52:56] [debug] Rate Limiter: Request recorded. Total in window: 9
[2025-11-18 06:52:56] [debug] LGL Membership Response Array
(
    [success] => 1
    [http_code] => 200
    [data] => Array
        (
            [api_version] => 1.0
            [id] => 4122
            [constituent_id] => 947172
            [membership_level_id] => 427
            [membership_level_name] =>  Supporter
            [date_start] => 2025-11-18
            [finish_date] => 2026-11-18
            [note] => Membership created via Modern LGL API on 2025-11-18
            [created_at] => 2025-11-18T11:52:56Z
            [updated_at] => 2025-11-18T11:52:56Z
        )

    [raw_response] => {"api_version":"1.0","id":4122,"constituent_id":947172,"membership_level_id":427,"membership_level_name":" Supporter","date_start":"2025-11-18","finish_date":"2026-11-18","note":"Membership created via Modern LGL API on 2025-11-18","created_at":"2025-11-18T11:52:56Z","updated_at":"2025-11-18T11:52:56Z"}
)

[2025-11-18 06:52:56] [debug] âœ… MembershipRegistrationService: New membership added (Step 5/5) Array
(
    [lgl_id] => 947172
    [success] => 1
    [response] => Array
        (
            [success] => 1
            [http_code] => 200
            [data] => Array
                (
                    [api_version] => 1.0
                    [id] => 4122
                    [constituent_id] => 947172
                    [membership_level_id] => 427
                    [membership_level_name] =>  Supporter
                    [date_start] => 2025-11-18
                    [finish_date] => 2026-11-18
                    [note] => Membership created via Modern LGL API on 2025-11-18
                    [created_at] => 2025-11-18T11:52:56Z
                    [updated_at] => 2025-11-18T11:52:56Z
                )

            [raw_response] => {"api_version":"1.0","id":4122,"constituent_id":947172,"membership_level_id":427,"membership_level_name":" Supporter","date_start":"2025-11-18","finish_date":"2026-11-18","note":"Membership created via Modern LGL API on 2025-11-18","created_at":"2025-11-18T11:52:56Z","updated_at":"2025-11-18T11:52:56Z"}
        )

)

[2025-11-18 06:52:56] [debug] LGL Connection: Cache HIT for constituents/947172
[2025-11-18 06:52:56] [debug] ðŸ” LGL Payments: retrievePaymentTypes called Array
(
    [method] => Memberships
)

[2025-11-18 06:52:56] [debug] ðŸ” LGL Payments: Using cached data
[2025-11-18 06:52:56] [debug] LGL Payments: Payment data retrieved Array
(
    [method] => Memberships
    [data_keys] => Array
        (
            [0] => payment_types
            [1] => gift_types
            [2] => funds
            [3] => campaigns
            [4] => categories
            [5] => method
            [6] => retrieved_at
        )

    [funds_count] => 9
    [campaigns_count] => 7
    [payment_types_count] => 7
)

[2025-11-18 06:52:56] [debug] LGL Payments: Fund ID detection by category Array
(
    [product_id] => 89885
    [parent_id] => 89885
    [product_type] => simple
    [categories] => Array
        (
            [0] => memberships
        )

)

[2025-11-18 06:52:56] [debug] LGL Payments: Membership category detected Array
(
    [fund_id] => 2437
)

[2025-11-18 06:52:56] [debug] ðŸ’³ Connection::addPayment() Array
(
    [lgl_id] => 947172
    [payment_data] => Array
        (
            [external_id] => 90172
            [is_anon] => 
            [gift_type_id] => 5
            [gift_type_name] => Other Income
            [gift_category_id] => 6002
            [gift_category_name] => Donation
            [campaign_id] => 857
            [campaign_name] => Membership Fees
            [fund_id] => 2437
            [fund_name] => 
            [appeal_id] => 0
            [appeal_name] => 
            [event_id] => 0
            [event_name] => 
            [received_amount] => 155.25
            [received_date] => 2025-11-18
            [payment_type_id] => 1547
            [payment_type_name] => stripe_cc
            [check_number] => 
            [deductible_amount] => 155.25
            [note] => Website Registration, Order #90172
            [ack_template_name] => 
            [deposit_date] => 2025-11-18
            [deposited_amount] => 155.25
            [parent_gift_id] => 0
            [parent_external_id] => 0
            [team_member] => 
        )

)

[2025-11-18 06:52:56] [debug] Rate Limiter: Waiting 582.3779296875ms before next request
[2025-11-18 06:52:57] [debug] ðŸ” RAW JSON PAYLOAD: {"external_id":90172,"is_anon":false,"gift_type_id":"5","gift_type_name":"Other Income","gift_category_id":"6002","gift_category_name":"Donation","campaign_id":"857","campaign_name":"Membership Fees","fund_id":2437,"fund_name":"","appeal_id":0,"appeal_name":"","event_id":0,"event_name":"","received_amount":"155.25","received_date":"2025-11-18","payment_type_id":"1547","payment_type_name":"stripe_cc","check_number":"","deductible_amount":"155.25","note":"Website Registration, Order #90172","ack_template_name":"","deposit_date":"2025-11-18","deposited_amount":"155.25","parent_gift_id":0,"parent_external_id":0,"team_member":""}
[2025-11-18 06:52:57] [debug] Rate Limiter: Request recorded. Total in window: 10
[2025-11-18 06:52:57] [debug] âœ… Payment added successfully Array
(
    [payment_id] => 905662
)

[2025-11-18 06:52:57] [debug] LGL Payments: Membership payment created Array
(
    [lgl_id] => 947172
    [order_id] => 90172
    [amount] => 155.25
)

[2025-11-18 06:52:57] [debug] LGL Cache: SET key payment_905662 (TTL: 3600s)
[2025-11-18 06:52:57] [debug] âœ… MembershipRegistrationService: Payment created Array
(
    [payment_id] => 905662
    [lgl_id] => 947172
    [order_id] => 90172
    [amount] => 155.25
)

[2025-11-18 06:52:57] [debug] LGL Cache: GET MISS for key api_request_71f52a1b4d27106b1e7a35b7f5b77db4
[2025-11-18 06:52:57] [debug] Rate Limiter: Waiting 440.34619140625ms before next request
[2025-11-18 06:52:58] [debug] Rate Limiter: Request recorded. Total in window: 11
[2025-11-18 06:52:58] [debug] âœ… MembershipOrderHandler::registerUserInLGL() COMPLETED Array
(
    [user_id] => 1967
    [lgl_id] => 947172
    [status] => partial
)

[2025-11-18 06:52:58] [debug] âœ… MembershipOrderHandler::processOrderLglSync() COMPLETED Array
(
    [order_id] => 90172
    [user_id] => 1967
    [lgl_id] => 947172
    [match_method] => user_meta
    [payment_id] => 905662
)

[2025-11-18 06:52:58] [debug] âœ… OrderProcessor: MembershipOrderHandler (LGL sync) completed
[2025-11-18 06:52:58] [debug] âœ… OrderProcessor::processOrderProductsLglSync() COMPLETED Array
(
    [products_processed] => 1
    [events_processed] => 0
)

[2025-11-18 06:52:58] [debug] âœ… OrderProcessor::processLglSyncOnly() COMPLETED Array
(
    [order_id] => 90172
)

[2025-11-18 06:52:58] [debug] âœ… AsyncOrderProcessor: Async processing completed Array
(
    [order_id] => 90172
)

[2025-11-18 06:53:15] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:53:15] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:53:16] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:55:16] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:55:16] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:57:17] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:57:17] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:57:18] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:59:23] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:59:23] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:59:23] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:59:24] [debug] ðŸ” SubscriptionRenewalManager: displayManualRenewalStatus() called Array
(
    [user_id] => 1967
    [show_all] => no
)

[2025-11-18 06:59:24] [debug] ðŸ“Š WC Subscriptions check Array
(
    [user_id] => 1967
    [subscription_count] => 0
    [has_subscriptions] => 
)

[2025-11-18 06:59:24] [debug] ðŸ” Checking for one-time membership (priority check) Array
(
    [user_id] => 1967
)

[2025-11-18 06:59:24] [debug] ðŸ” Getting one-time membership status Array
(
    [user_id] => 1967
)

[2025-11-18 06:59:24] [debug] ðŸ“Š User meta values Array
(
    [user_id] => 1967
    [subscription_status] => one-time
    [renewal_timestamp] => 1795002767
    [start_timestamp] => 1763448767
    [membership_level] =>  Supporter
    [renewal_date_formatted] => 2026-11-18 11:52:47
    [start_date_formatted] => 2025-11-18 06:52:47
)

[2025-11-18 06:59:24] [debug] â° Membership expiration check Array
(
    [user_id] => 1967
    [now] => 2025-11-18 06:59:24
    [renewal_date] => 2026-11-18 11:52:47
    [is_active] => 1
    [seconds_remaining] => 31553603
)

[2025-11-18 06:59:24] [debug] ðŸ“… Days remaining calculated Array
(
    [user_id] => 1967
    [days_remaining] => 366
)

[2025-11-18 06:59:24] [debug] ðŸ” Getting last membership product name Array
(
    [user_id] => 1967
)

[2025-11-18 06:59:24] [debug] ðŸ“¦ Orders found Array
(
    [user_id] => 1967
    [order_count] => 78
)

[2025-11-18 06:59:24] [debug] ðŸ” Checking order Array
(
    [order_id] => 90172
    [order_date] => 2025-11-18 06:52:45
)

[2025-11-18 06:59:24] [debug] ðŸ·ï¸ Checking product Array
(
    [product_id] => 89885
    [product_name] => Supporter
    [has_membership_category] => 1
)

[2025-11-18 06:59:24] [debug] âœ… Found membership product Array
(
    [product_name] => Supporter
    [order_id] => 90172
)

[2025-11-18 06:59:24] [debug] ðŸŽ« Product name retrieved Array
(
    [user_id] => 1967
    [product_name] => Supporter
)

[2025-11-18 06:59:24] [debug] âœ… One-time membership status compiled Array
(
    [user_id] => 1967
    [status_data] => Array
        (
            [user_id] => 1967
            [membership_level] =>  Supporter
            [product_name] => Supporter
            [start_date] => November 18, 2025
            [renewal_date] => November 18, 2026
            [days_remaining] => 366
            [is_active] => 1
            [status] => active
        )

)

[2025-11-18 06:59:24] [debug] ðŸ“‹ One-time membership status result Array
(
    [user_id] => 1967
    [status_found] => 1
    [status_data] => Array
        (
            [user_id] => 1967
            [membership_level] =>  Supporter
            [product_name] => Supporter
            [start_date] => November 18, 2025
            [renewal_date] => November 18, 2026
            [days_remaining] => 366
            [is_active] => 1
            [status] => active
        )

)

[2025-11-18 06:59:24] [debug] âœ… One-time membership found - displaying it (hiding any WC subscriptions) Array
(
    [user_id] => 1967
    [membership_level] =>  Supporter
    [days_remaining] => 366
    [wc_subscriptions_hidden] => 0
)

[2025-11-18 06:59:28] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 06:59:29] [debug] Membership cron jobs scheduled successfully
[2025-11-18 06:59:29] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:01:19] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:01:19] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:02:06] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:02:06] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:02:07] [debug] EmailBlocker: showEmailBlockingNotice() called
[2025-11-18 07:02:07] [debug] EmailBlocker: Rendering admin notice
[2025-11-18 07:02:07] [debug] EmailBlocker: Blocked count = 50
[2025-11-18 07:02:12] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:02:12] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:02:12] [debug] EmailBlocker: showEmailBlockingNotice() called
[2025-11-18 07:02:12] [debug] EmailBlocker: Rendering admin notice
[2025-11-18 07:02:12] [debug] EmailBlocker: Blocked count = 50
[2025-11-18 07:03:13] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:03:13] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:03:13] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:05:13] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:05:13] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:06:50] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:06:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:07:50] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:07:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:08:50] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:08:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:08:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:09:50] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:09:51] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:09:55] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:09:55] [debug] EmailBlocker: showEmailBlockingNotice() called
[2025-11-18 07:09:55] [debug] EmailBlocker: Rendering admin notice
[2025-11-18 07:09:55] [debug] EmailBlocker: Blocked count = 50
[2025-11-18 07:10:56] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:10:56] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:11:56] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:11:56] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:12:55] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:12:55] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:12:55] [debug] EmailBlocker: showEmailBlockingNotice() called
[2025-11-18 07:12:55] [debug] EmailBlocker: Rendering admin notice
[2025-11-18 07:12:55] [debug] EmailBlocker: Blocked count = 50
[2025-11-18 07:13:15] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:13:15] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:13:15] [debug] EmailBlocker: showEmailBlockingNotice() called
[2025-11-18 07:13:15] [debug] EmailBlocker: Rendering admin notice
[2025-11-18 07:13:15] [debug] EmailBlocker: Blocked count = 50
[2025-11-18 07:13:25] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:13:26] [debug] LGL Email Blocker: ACTIVE - MANUAL OVERRIDE ENABLED (Level: all)
[2025-11-18 07:13:26] [debug] EmailBlocker: showEmailBlockingNotice() called
[2025-11-18 07:13:26] [debug] EmailBlocker: Rendering admin notice
[2025-11-18 07:13:26] [debug] EmailBlocker: Blocked count = 50
